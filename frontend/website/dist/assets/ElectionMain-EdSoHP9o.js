import{i as T,t as N,r as $,u as C,w as j,o as t,c,F as f,a as b,b as s,d as m,e as k,f as l,g as d,h as E,j as A,k as F,l as B,m as R}from"./index-VqEk0mKh.js";import{s as w,a as I,b as V,c as z,d as S}from"./AppOpinion-Xyu3Q7Nz.js";import{_ as G,a as D}from"./AppIssuesSelector-miI1GYtx.js";import{_ as L,a as q}from"./AppCandidatesSelector-9dLHyCUX.js";const H={class:"flex align-items-center"},J={class:"flex flex-column"},K={key:0,class:"font-bold ml-4 font-light uppercase text-sm",style:{color:"#797979"}},P={__name:"ElectionMainOpinionsByAuthor",props:{groupedOpinions:{type:Object,default:{}},scrollToAuthorId:{type:Number}},emits:["onScrollFinish"],setup(x,{emit:v}){const _=T("$groupArrayBy"),h=x,p=v,{groupedOpinions:g,scrollToAuthorId:u}=N(h),r=$({}),i=C();return j(u,()=>{var a;u.value&&((a=r.value[u.value])==null||a.scrollIntoView({behavior:"smooth"}),p("onScrollFinish"))}),(a,O)=>(t(),c(f,null,[(t(!0),c(f,null,b(s(g),(n,e)=>(t(),c("div",{class:"mb-4",ref_for:!0,ref:o=>r.value[e]=o},[s(i).getCandidate(e)?(t(),m(s(V),{key:0},{content:k(()=>{var o;return[l("div",H,[d(s(w),{image:(o=s(i).getCandidate(e))==null?void 0:o.photo,size:"xlarge",shape:"rectangle",class:"mr-2"},null,8,["image"]),l("div",J,[d(s(I),{text:"",onClick:y=>s(F).push(`/election/${s(i).currentElection.id}/candidate/${e}`)},{default:k(()=>[E(A(s(i).getCandidateName(e)),1)]),_:2},1032,["onClick"]),s(i).hasCandidateOrganisations(e)?(t(),c("span",K,A(s(i).getCandidateOrganisationsStr(e)),1)):B("",!0)])]),(t(!0),c(f,null,b(s(_)(n,y=>y.issue_id),(y,M)=>(t(),m(G,{opinions:y,issueId:Number(M)},null,8,["opinions","issueId"]))),256))]}),_:2},1024)):B("",!0)],512))),256)),d(s(z))],64))}},Q={class:"flex align-items-center"},U={__name:"ElectionMainOpinionsByIssue",props:{groupedOpinions:{type:Object,default:{}},scrollToIssueId:{type:Number}},emits:["onScrollFinish"],setup(x,{emit:v}){const _=T("$groupArrayBy"),h=x,p=v,{groupedOpinions:g,scrollToIssueId:u}=N(h),r=C(),i=$({});return j(u,()=>{var a;u.value&&((a=i.value[u.value])==null||a.scrollIntoView({behavior:"smooth"}),p("onScrollFinish"))}),(a,O)=>(t(),c(f,null,[(t(!0),c(f,null,b(s(g),(n,e)=>(t(),c("div",{class:"mb-4",ref_for:!0,ref:o=>i.value[e]=o},[s(r).getIssue(e)?(t(),m(s(V),{key:0},{content:k(()=>[l("div",Q,[d(s(w),{image:s(r).getIssueImage(e),size:"xlarge",shape:"rectangle",class:"mr-2"},null,8,["image"]),d(s(I),{text:"",onClick:o=>s(F).push(`/election/${s(r).currentElection.id}/issue/${e}`)},{default:k(()=>[E(A(s(r).getIssueTitle(e)),1)]),_:2},1032,["onClick"])]),(t(!0),c(f,null,b(s(_)(n,o=>o.author_id),(o,y)=>(t(),m(L,{opinions:o,candidateId:Number(y)},null,8,["opinions","candidateId"]))),256))]),_:2},1024)):B("",!0)],512))),256)),d(s(z))],64))}},W={class:"flex flex-column"},X=l("div",{class:"flex justify-content-center"},[l("h5",null,"Afficher les opinions par:")],-1),Y={class:"flex justify-content-center"},Z=l("div",{class:"flex justify-content-center"},[l("h5",null,"Aller à:")],-1),ee={class:"flex flex-wrap justify-content-center mb-4",style:{"max-width":"800px",margin:"auto"}},se={class:"grid"},oe={class:"lg:col-offset-3 lg:col-6 md:col-offset-2 md:col-8 col"},ie={__name:"ElectionMain",setup(x){const v=T("$groupArrayBy"),_=$("author_id"),h=C(),p=n=>_.value==n,g=(n,e)=>{_.value=n,e.target.blur()},u=R(()=>v(h.currentElection.opinions,n=>n[_.value])),r=$(null),i=n=>{r.value=n},a=$(null),O=n=>{a.value=n};return(n,e)=>(t(),c(f,null,[l("div",W,[X,l("div",Y,[d(s(I),{severity:p("author_id")?"primary":"secondary",label:"Candidat",class:"mx-2",onClick:e[0]||(e[0]=o=>g("author_id",o)),rounded:"",size:"small"},null,8,["severity"]),d(s(I),{severity:p("issue_id")?"primary":"secondary",label:"Thème",class:"mx-2",onClick:e[1]||(e[1]=o=>g("issue_id",o)),rounded:"",size:"small"},null,8,["severity"])]),d(s(S)),Z,l("div",ee,[p("author_id")?(t(),m(q,{key:0,onScroll:e[2]||(e[2]=o=>i(o))})):(t(),m(D,{key:1,onScroll:e[3]||(e[3]=o=>O(o))}))])]),d(s(S)),l("div",se,[l("div",oe,[p("author_id")?(t(),m(P,{key:0,groupedOpinions:u.value,scrollToAuthorId:r.value,onOnScrollFinish:e[4]||(e[4]=o=>r.value=null)},null,8,["groupedOpinions","scrollToAuthorId"])):(t(),m(U,{key:1,groupedOpinions:u.value,scrollToIssueId:a.value,onOnScrollFinish:e[5]||(e[5]=o=>a.value=null)},null,8,["groupedOpinions","scrollToIssueId"]))])])],64))}};export{ie as default};
