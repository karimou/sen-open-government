import{t as C,r as $,u as O,w as B,o as l,c as r,F as a,a as x,b as n,d as c,e as s,f as S,g as j,h as E,i as A,j as h,k as w}from"./index-w7wcgk8B.js";import{s as N,a as y,b as F,c as T}from"./panel.esm-4nJJD4U-.js";import{_ as z}from"./AppIssueOpinionsPanel-DTc5qS8Y.js";import{_ as V}from"./AppCandidateOpinionsPanel-VNvP6UPS.js";const M={class:"flex align-items-center"},R={__name:"ElectionMainOpinionsByAuthor",props:{groupedOpinions:{type:Object,default:{}},scrollToAuthorId:{type:Number}},emits:["onScrollFinish"],setup(I,{emit:m}){const f=I,d=m,{groupedOpinions:v,scrollToAuthorId:i}=C(f),p=$({}),u=O(),g=_=>{if(_)return`${_.firstname} ${_.lastname}`};return B(i,()=>{i.value&&(p.value[i.value].scrollIntoView({behavior:"smooth"}),d("onScrollFinish"))}),(_,k)=>(l(),r(a,null,[(l(!0),r(a,null,x(s(v),(t,e)=>(l(),r("div",{class:"mb-4",ref_for:!0,ref:o=>p.value[e]=o},[n("div",M,[c(s(N),{image:s(u).getCandidate(e).photo,size:"xlarge",shape:"rectangle",class:"mr-2"},null,8,["image"]),c(s(y),{text:"",onClick:o=>s(A).push(`/election/${s(u).currentElection.id}/candidate/${e}`)},{default:S(()=>[j(E(g(s(u).getCandidate(e))),1)]),_:2},1032,["onClick"])]),n("div",null,[(l(!0),r(a,null,x(Object.groupBy(t,o=>o.issue_id),(o,b)=>(l(),h(z,{opinions:o,issueId:Number(b)},null,8,["opinions","issueId"]))),256))])],512))),256)),c(s(F))],64))}},G={class:"flex align-items-center"},D={__name:"ElectionMainOpinionsByIssue",props:{groupedOpinions:{type:Object,default:{}},scrollToIssueId:{type:Number}},emits:["onScrollFinish"],setup(I,{emit:m}){const f=I,d=m,{groupedOpinions:v,scrollToIssueId:i}=C(f),p=O(),u=$({});return B(i,()=>{i.value&&(u.value[i.value].scrollIntoView({behavior:"smooth"}),d("onScrollFinish"))}),(g,_)=>(l(),r(a,null,[(l(!0),r(a,null,x(s(v),(k,t)=>(l(),r("div",{class:"mb-4",ref_for:!0,ref:e=>u.value[t]=e},[n("div",G,[c(s(N),{image:s(p).getIssueImage(t),size:"xlarge",shape:"rectangle",class:"mr-2"},null,8,["image"]),c(s(y),{text:"",onClick:e=>s(A).push(`/election/${s(p).currentElection.id}/issue/${t}`)},{default:S(()=>[j(E(s(p).getIssueTitle(t)),1)]),_:2},1032,["onClick"])]),n("div",null,[(l(!0),r(a,null,x(Object.groupBy(k,e=>e.author_id),(e,o)=>(l(),h(V,{opinions:e,candidateId:Number(o)},null,8,["opinions","candidateId"]))),256))])],512))),256)),c(s(F))],64))}},L={class:"flex flex-column"},q=n("div",{class:"flex justify-content-center"},[n("h5",null,"Afficher les opinions par:")],-1),H={class:"flex justify-content-center"},J=n("div",{class:"flex justify-content-center"},[n("h5",null,"Aller à:")],-1),K={class:"flex justify-content-center mb-4",style:{"max-width":"600px",margin:"auto"}},P={class:"grid"},Q={class:"lg:col-offset-3 lg:col-6 md:col-offset-2 md:col-8 col-offset-1 col-10"},Z={__name:"ElectionMain",setup(I){const m=$("author_id"),f=O(),d=t=>m.value==t,v=(t,e)=>{m.value=t,e.target.blur()},i=w(()=>Object.groupBy(f.currentElection.opinions,t=>t[m.value])),p=t=>{if(t)return`${t.firstname} ${t.lastname}`},u=$(null),g=$(null),_=(t,e)=>{u.value=t,e.target.blur()},k=(t,e)=>{g.value=t,e.target.blur()};return(t,e)=>(l(),r(a,null,[n("div",L,[q,n("div",H,[c(s(y),{severity:d("author_id")?"primary":"secondary",label:"Candidat",class:"mx-2",onClick:e[0]||(e[0]=o=>v("author_id",o)),rounded:"",size:"small"},null,8,["severity"]),c(s(y),{severity:d("issue_id")?"primary":"secondary",label:"Thème",class:"mx-2",onClick:e[1]||(e[1]=o=>v("issue_id",o)),rounded:"",size:"small"},null,8,["severity"])]),c(s(T)),J,n("div",K,[d("author_id")?(l(!0),r(a,{key:0},x(s(f).currentElection.candidates,o=>(l(),h(s(y),{label:p(o),class:"mx-2",text:"",size:"small",severity:"primary",onClick:b=>_(o.id,b)},null,8,["label","onClick"]))),256)):(l(!0),r(a,{key:1},x(s(f).currentElection.issues,o=>(l(),h(s(y),{label:o.title,class:"mx-1",text:"",size:"small",severity:"primary",onClick:b=>k(o.id,b)},null,8,["label","onClick"]))),256))])]),c(s(T)),n("div",P,[n("div",Q,[d("author_id")?(l(),h(R,{key:0,groupedOpinions:i.value,scrollToAuthorId:u.value,onOnScrollFinish:e[2]||(e[2]=o=>u.value=null)},null,8,["groupedOpinions","scrollToAuthorId"])):(l(),h(D,{key:1,groupedOpinions:i.value,scrollToIssueId:g.value,onOnScrollFinish:e[3]||(e[3]=o=>g.value=null)},null,8,["groupedOpinions","scrollToIssueId"]))])])],64))}};export{Z as default};
