import{i as N,q as V,d as l,u as j,s as k,v as C,w as S,p as A,c as a,b as s,a as L,l as M,j as n,f,F as y,e as P,h as R,o as u}from"./index-00F_7HYR.js";import{b as T,c as z}from"./panel.esm-uD7lV2Db.js";import{s as F}from"./sidebar.esm-xkk07Vxf.js";import{a as H,_ as O}from"./AppCandidatesSelector-N_6XKRsT.js";import{_ as U}from"./_plugin-vue_export-helper-x3n3nnut.js";const q={class:"pt-2 w-full"},D={class:"issue-name-zone justify-content-center"},G=["src"],J={class:"text-4xl"},K={class:"flex flex-wrap justify-content-center mb-6"},Q={style:{"z-index":"1",position:"relative"}},W={class:"grid"},X={class:"lg:col-offset-3 lg:col-6 md:col-offset-2 md:col-8"},Y=["innerHTML"],Z={__name:"ElectionIssue",setup(ee){const g=N("$groupArrayBy"),x=V(),c=l(null),I=l(null),r=l(null),i=l(null),d=l(!1),p=j(),v=t=>{I.value=Number(t.electionId),r.value=Number(t.issueId)};k(()=>{v(x.params),window.scroll({top:0,behavior:"smooth"})}),C((t,e)=>{v(t.params),c.value=null}),S(r,()=>i.value=p.getIssue(r.value));const $=A(()=>{if(!p.currentElection.opinions)return[];let t=p.currentElection.opinions.filter(e=>c.value?e.author_id==c.value:!0).filter(e=>e.issue_id==r.value);return g(t,e=>e.author_id)}),m=l({}),B=t=>{var e;(e=m.value[t])==null||e.scrollIntoView({behavior:"smooth"})};return(t,e)=>{var _,h,w;return u(),a(y,null,[s("div",q,[s("div",D,[(_=i.value)!=null&&_.photo?(u(),a("img",{key:0,src:(h=i.value)==null?void 0:h.photo,width:"150"},null,8,G)):L("",!0),s("div",null,[s("span",J,M((w=i.value)==null?void 0:w.title),1)]),s("div",null,[n(f(T),{label:"Plus d'infos",text:"",severity:"primary",onClick:e[0]||(e[0]=o=>d.value=!0)})])]),s("div",K,[n(H,{onScroll:e[1]||(e[1]=o=>B(o))})]),s("div",Q,[s("div",W,[s("div",X,[(u(!0),a(y,null,P($.value,(o,b)=>(u(),a("div",{ref_for:!0,ref:E=>m.value[b]=E},[n(O,{opinions:o,candidateId:Number(b),collapsed:!1},null,8,["opinions","candidateId"])],512))),256))])])]),n(f(F),{visible:d.value,"onUpdate:visible":e[2]||(e[2]=o=>d.value=o),header:"Plus d'infos",class:"w-full md:w-20rem lg:w-30rem"},{default:R(()=>{var o;return[s("p",{style:{"white-space":"pre-wrap"},innerHTML:(o=i.value)==null?void 0:o.short_description},null,8,Y)]}),_:1},8,["visible"])]),n(f(z))],64)}}},ne=U(Z,[["__scopeId","data-v-25a985d6"]]);export{ne as default};
