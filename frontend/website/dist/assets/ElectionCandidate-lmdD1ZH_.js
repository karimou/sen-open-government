import{l as B,r as n,u as C,m as N,n as S,w as L,k as h,c as k,b as t,p as y,h as j,d as r,e as o,F as I,a as z,f as M,o as p,j as O}from"./index-ycAmBI8-.js";import{_ as P,s as U,a as F,b as H}from"./bg-t3F1NZk7.js";import{a as R,b as T}from"./panel.esm-K5aAKKLT.js";import{_ as D}from"./AppIssueOpinionsPanel-53fOt0om.js";import{_ as q}from"./_plugin-vue_export-helper-x3n3nnut.js";const A={class:"candidate-name-zone justify-content-center"},G={class:"text-4xl"},J={style:{"z-index":"1",position:"relative"}},K={class:"grid"},Q={class:"lg:col-offset-3 lg:col-6 md:col-offset-2 md:col-8 col-offset-1 col-10"},W={class:"field"},X=["innerHTML"],Y={__name:"ElectionCandidate",setup(Z){const $=B(),i=n(null),x=n(null),u=n(null),s=n(null),d=n(!1),c=C(),m=a=>{x.value=Number(a.electionId),u.value=Number(a.candidateId)};N(()=>m($.params)),S((a,e)=>{m(a.params),i.value=null}),L(u,()=>s.value=c.getCandidate(u.value));const E=h(()=>{if(!c.currentElection.opinions)return[];let a=c.currentElection.opinions.filter(e=>i.value?e.issue_id==i.value:!0).filter(e=>e.author_id==u.value);return Object.groupBy(a,e=>e.issue_id)}),V=h(()=>{if(s.value)return`${s.value.firstname} ${s.value.lastname}`});return(a,e)=>{var f,v,_,b,g;return p(),k(I,null,[t("div",{class:"background-image pt-2 w-full",style:y({backgroundImage:`url(${o(H)})`})},[t("div",{class:"candidate-image",style:y({backgroundImage:`url(${(f=s.value)==null?void 0:f.photo})`})},null,4),t("div",A,[t("div",null,[t("span",G,j(V.value),1)]),t("div",null,[r(o(R),{label:"Plus d'infos",text:"",severity:"primary",onClick:e[0]||(e[0]=l=>d.value=!0)})]),r(P,{website:(v=s.value)==null?void 0:v.website,facebook:(_=s.value)==null?void 0:_.facebook,instagram:(b=s.value)==null?void 0:b.instagram,twitter:(g=s.value)==null?void 0:g.twitter},null,8,["website","facebook","instagram","twitter"])]),t("div",J,[t("div",K,[t("div",Q,[t("div",W,[r(o(U),{class:"w-full",options:o(c).currentElection.issues,modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=l=>i.value=l),optionLabel:"title",optionValue:"id",showClear:"",placeholder:"Sélectionner un thème"},null,8,["options","modelValue"])]),(p(!0),k(I,null,z(E.value,(l,w)=>(p(),O(D,{ref_for:!0,ref:w,opinions:l,issueId:Number(w),collapsed:!1},null,8,["opinions","issueId"]))),256))])])]),r(o(F),{visible:d.value,"onUpdate:visible":e[2]||(e[2]=l=>d.value=l),header:"Plus d'infos",class:"w-full md:w-20rem lg:w-30rem"},{default:M(()=>[t("p",{style:{"white-space":"pre-wrap"},innerHTML:s.value.description},null,8,X)]),_:1},8,["visible"])],4),r(o(T))],64)}}},oe=q(Y,[["__scopeId","data-v-8e0929a6"]]);export{oe as default};
