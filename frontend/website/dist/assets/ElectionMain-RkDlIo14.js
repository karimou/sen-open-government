import{B as D,o,c as n,m as y,r as B,a as v,b as i,i as x,t as E,d as C,u as N,w as F,F as $,e as I,f as t,g,h as O,j as p,k as V,l as T,n as z,p as L}from"./index-WZjibKqr.js";import{s as P,a as M,b as S,c as R,d as w}from"./panel.esm-DQwy4lX6.js";import{_ as q,a as H}from"./AppIssuesSelector-Ozv1Goqc.js";import{_ as J,a as K}from"./AppCandidatesSelector-VcJan_9E.js";var Q={root:"p-card p-component",header:"p-card-header",body:"p-card-body",caption:"p-card-caption",title:"p-card-title",subtitle:"p-card-subtitle",content:"p-card-content",footer:"p-card-footer"},U=D.extend({name:"card",classes:Q}),W={name:"BaseCard",extends:P,style:U},j={name:"Card",extends:W};function X(e,_,f,b,m,h){return o(),n("div",y({class:e.cx("root")},e.ptm("root"),{"data-pc-name":"card"}),[e.$slots.header?(o(),n("div",y({key:0,class:e.cx("header")},e.ptm("header")),[B(e.$slots,"header")],16)):v("",!0),i("div",y({class:e.cx("body")},e.ptm("body")),[e.$slots.title||e.$slots.subtitle?(o(),n("div",y({key:0,class:e.cx("caption")},e.ptm("caption")),[e.$slots.title?(o(),n("div",y({key:0,class:e.cx("title")},e.ptm("title")),[B(e.$slots,"title")],16)):v("",!0),e.$slots.subtitle?(o(),n("div",y({key:1,class:e.cx("subtitle")},e.ptm("subtitle")),[B(e.$slots,"subtitle")],16)):v("",!0)],16)):v("",!0),i("div",y({class:e.cx("content")},e.ptm("content")),[B(e.$slots,"content")],16),e.$slots.footer?(o(),n("div",y({key:1,class:e.cx("footer")},e.ptm("footer")),[B(e.$slots,"footer")],16)):v("",!0)],16)],16)}j.render=X;const Y={class:"flex align-items-center"},Z={class:"flex flex-column"},ee={key:0,class:"font-bold ml-4 font-light uppercase text-sm",style:{color:"#797979"}},se={__name:"ElectionMainOpinionsByAuthor",props:{groupedOpinions:{type:Object,default:{}},scrollToAuthorId:{type:Number}},emits:["onScrollFinish"],setup(e,{emit:_}){const f=x("$groupArrayBy"),b=e,m=_,{groupedOpinions:h,scrollToAuthorId:d}=E(b),a=C({}),u=N();return F(d,()=>{var c;d.value&&((c=a.value[d.value])==null||c.scrollIntoView({behavior:"smooth"}),m("onScrollFinish"))}),(c,A)=>(o(),n($,null,[(o(!0),n($,null,I(t(h),(l,s)=>(o(),n("div",{class:"mb-4",ref_for:!0,ref:r=>a.value[s]=r},[t(u).getCandidate(s)?(o(),g(t(j),{key:0},{content:O(()=>{var r;return[i("div",Y,[p(t(M),{image:(r=t(u).getCandidate(s))==null?void 0:r.photo,size:"xlarge",shape:"rectangle",class:"mr-2"},null,8,["image"]),i("div",Z,[p(t(S),{text:"",onClick:k=>t(z).push(`/election/${t(u).currentElection.id}/candidate/${s}`)},{default:O(()=>[V(T(t(u).getCandidateName(s)),1)]),_:2},1032,["onClick"]),t(u).hasCandidateOrganisations(s)?(o(),n("span",ee,T(t(u).getCandidateOrganisationsStr(s)),1)):v("",!0)])]),(o(!0),n($,null,I(t(f)(l,k=>k.issue_id),(k,G)=>(o(),g(q,{opinions:k,issueId:Number(G)},null,8,["opinions","issueId"]))),256))]}),_:2},1024)):v("",!0)],512))),256)),p(t(R))],64))}},te={class:"flex align-items-center"},oe={__name:"ElectionMainOpinionsByIssue",props:{groupedOpinions:{type:Object,default:{}},scrollToIssueId:{type:Number}},emits:["onScrollFinish"],setup(e,{emit:_}){const f=x("$groupArrayBy"),b=e,m=_,{groupedOpinions:h,scrollToIssueId:d}=E(b),a=N(),u=C({});return F(d,()=>{var c;d.value&&((c=u.value[d.value])==null||c.scrollIntoView({behavior:"smooth"}),m("onScrollFinish"))}),(c,A)=>(o(),n($,null,[(o(!0),n($,null,I(t(h),(l,s)=>(o(),n("div",{class:"mb-4",ref_for:!0,ref:r=>u.value[s]=r},[t(a).getIssue(s)?(o(),g(t(j),{key:0},{content:O(()=>[i("div",te,[p(t(M),{image:t(a).getIssueImage(s),size:"xlarge",shape:"rectangle",class:"mr-2"},null,8,["image"]),p(t(S),{text:"",onClick:r=>t(z).push(`/election/${t(a).currentElection.id}/issue/${s}`)},{default:O(()=>[V(T(t(a).getIssueTitle(s)),1)]),_:2},1032,["onClick"])]),(o(!0),n($,null,I(t(f)(l,r=>r.author_id),(r,k)=>(o(),g(J,{opinions:r,candidateId:Number(k)},null,8,["opinions","candidateId"]))),256))]),_:2},1024)):v("",!0)],512))),256)),p(t(R))],64))}},re={class:"flex flex-column"},ne=i("div",{class:"flex justify-content-center"},[i("h5",null,"Afficher les opinions par:")],-1),le={class:"flex justify-content-center"},ie=i("div",{class:"flex justify-content-center"},[i("h5",null,"Aller à:")],-1),ae={class:"flex justify-content-center mb-4",style:{"max-width":"800px",margin:"auto","flex-wrap":"wrap"}},ue={class:"grid"},ce={class:"lg:col-offset-3 lg:col-6 md:col-offset-2 md:col-8"},ye={__name:"ElectionMain",setup(e){const _=x("$groupArrayBy"),f=C("author_id"),b=N(),m=l=>f.value==l,h=(l,s)=>{f.value=l,s.target.blur()},d=L(()=>_(b.currentElection.opinions,l=>l[f.value])),a=C(null),u=l=>{a.value=l},c=C(null),A=l=>{c.value=l};return(l,s)=>(o(),n($,null,[i("div",re,[ne,i("div",le,[p(t(S),{severity:m("author_id")?"primary":"secondary",label:"Candidat",class:"mx-2",onClick:s[0]||(s[0]=r=>h("author_id",r)),rounded:"",size:"small"},null,8,["severity"]),p(t(S),{severity:m("issue_id")?"primary":"secondary",label:"Thème",class:"mx-2",onClick:s[1]||(s[1]=r=>h("issue_id",r)),rounded:"",size:"small"},null,8,["severity"])]),p(t(w)),ie,i("div",ae,[m("author_id")?(o(),g(K,{key:0,onScroll:s[2]||(s[2]=r=>u(r))})):(o(),g(H,{key:1,onScroll:s[3]||(s[3]=r=>A(r))}))])]),p(t(w)),i("div",ue,[i("div",ce,[m("author_id")?(o(),g(se,{key:0,groupedOpinions:d.value,scrollToAuthorId:a.value,onOnScrollFinish:s[4]||(s[4]=r=>a.value=null)},null,8,["groupedOpinions","scrollToAuthorId"])):(o(),g(oe,{key:1,groupedOpinions:d.value,scrollToIssueId:c.value,onOnScrollFinish:s[5]||(s[5]=r=>c.value=null)},null,8,["groupedOpinions","scrollToIssueId"]))])])],64))}};export{ye as default};
