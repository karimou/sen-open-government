import{m as V,r as n,u as B,n as N,p as S,w as C,l as L,c as I,d as s,q as y,h as j,e as r,b as a,F as k,a as z,f as M,o as p,j as O}from"./index-rss7odZw.js";import{_ as P,s as U,a as F,b as H}from"./bg-7KC7TLZz.js";import{a as R,b as T}from"./panel.esm-MVKFybP1.js";import{_ as q}from"./AppCandidateOpinionsPanel-cGxoN2wr.js";import{_ as D}from"./_plugin-vue_export-helper-x3n3nnut.js";const A={class:"issue-name-zone justify-content-center"},G={class:"text-4xl"},J={style:{"z-index":"1",position:"relative"}},K={class:"grid"},Q={class:"lg:col-offset-3 lg:col-6 md:col-offset-2 md:col-8 col-offset-1 col-10"},W={class:"field"},X=["innerHTML"],Y={__name:"ElectionIssue",setup(Z){const x=V(),i=n(null),$=n(null),u=n(null),l=n(null),d=n(!1),c=B(),m=o=>{$.value=Number(o.electionId),u.value=Number(o.issueId)};N(()=>m(x.params)),S((o,e)=>{m(o.params),i.value=null}),C(u,()=>l.value=c.getIssue(u.value));const E=L(()=>{if(!c.currentElection.opinions)return[];let o=c.currentElection.opinions.filter(e=>i.value?e.author_id==i.value:!0).filter(e=>e.issue_id==u.value);return Object.groupBy(o,e=>e.author_id)});return(o,e)=>{var f,v,_,b,g,w;return p(),I(k,null,[s("div",{class:"background-image pt-2 w-full",style:y({backgroundImage:`url(${a(H)})`})},[s("div",{class:"issue-image",style:y({backgroundImage:`url(${(f=l.value)==null?void 0:f.photo})`})},null,4),s("div",A,[s("div",null,[s("span",G,j((v=l.value)==null?void 0:v.title),1)]),s("div",null,[r(a(R),{label:"Plus d'infos",text:"",severity:"primary",onClick:e[0]||(e[0]=t=>d.value=!0)})]),r(P,{website:(_=l.value)==null?void 0:_.website,facebook:(b=l.value)==null?void 0:b.facebook,instagram:(g=l.value)==null?void 0:g.instagram,twitter:(w=l.value)==null?void 0:w.twitter},null,8,["website","facebook","instagram","twitter"])]),s("div",J,[s("div",K,[s("div",Q,[s("div",W,[r(a(U),{class:"w-full",options:a(c).currentElection.candidates,modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=t=>i.value=t),optionLabel:"title",optionValue:"id",showClear:"",placeholder:"SÃ©lectionner un candidate"},null,8,["options","modelValue"])]),(p(!0),I(k,null,z(E.value,(t,h)=>(p(),O(q,{ref_for:!0,ref:h,opinions:t,candidateId:Number(h),collapsed:!1},null,8,["opinions","candidateId"]))),256))])])]),r(a(F),{visible:d.value,"onUpdate:visible":e[2]||(e[2]=t=>d.value=t),header:"Plus d'infos",class:"w-full md:w-20rem lg:w-30rem"},{default:M(()=>{var t;return[s("p",{style:{"white-space":"pre-wrap"},innerHTML:(t=l.value)==null?void 0:t.short_description},null,8,X)]}),_:1},8,["visible"])],4),r(a(T))],64)}}},ae=D(Y,[["__scopeId","data-v-bc9e79d6"]]);export{ae as default};
