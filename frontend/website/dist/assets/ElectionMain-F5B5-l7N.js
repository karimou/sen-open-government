import{t as T,r as $,u as O,w as B,o,c as n,F as u,a as b,b as s,d as r,e as d,f as S,g as j,h as E,i as N,j as y,k as A,l as V}from"./index-mhe5iCJG.js";import{s as w,a as x,b as F,c as C}from"./panel.esm-j1OMof0M.js";import{_ as M}from"./AppIssueOpinionsPanel-nCcJb_Gx.js";import{_ as R}from"./AppCandidateOpinionsPanel-xxzw9e3L.js";const G={class:"flex align-items-center"},D={__name:"ElectionMainOpinionsByAuthor",props:{groupedOpinions:{type:Object,default:{}},scrollToAuthorId:{type:Number}},emits:["onScrollFinish"],setup(k,{emit:v}){const g=k,_=v,{groupedOpinions:h,scrollToAuthorId:a}=T(g),m=$({}),i=O(),f=c=>{if(c)return`${c.firstname} ${c.lastname}`};return B(a,()=>{var c;a.value&&((c=m.value[a.value])==null||c.scrollIntoView({behavior:"smooth"}),_("onScrollFinish"))}),(c,I)=>(o(),n(u,null,[(o(!0),n(u,null,b(s(h),(t,e)=>{var l;return o(),n("div",{class:"mb-4",ref_for:!0,ref:p=>m.value[e]=p},[s(i).getCandidate(e)?(o(),n(u,{key:0},[r("div",G,[d(s(w),{image:(l=s(i).getCandidate(e))==null?void 0:l.photo,size:"xlarge",shape:"rectangle",class:"mr-2"},null,8,["image"]),d(s(x),{text:"",onClick:p=>s(N).push(`/election/${s(i).currentElection.id}/candidate/${e}`)},{default:S(()=>[j(E(f(s(i).getCandidate(e))),1)]),_:2},1032,["onClick"])]),r("div",null,[(o(!0),n(u,null,b(Object.groupBy(t,p=>p.issue_id),(p,z)=>(o(),y(M,{opinions:p,issueId:Number(z)},null,8,["opinions","issueId"]))),256))])],64)):A("",!0)],512)}),256)),d(s(F))],64))}},L={class:"flex align-items-center"},q={__name:"ElectionMainOpinionsByIssue",props:{groupedOpinions:{type:Object,default:{}},scrollToIssueId:{type:Number}},emits:["onScrollFinish"],setup(k,{emit:v}){const g=k,_=v,{groupedOpinions:h,scrollToIssueId:a}=T(g),m=O(),i=$({});return B(a,()=>{var f;a.value&&((f=i.value[a.value])==null||f.scrollIntoView({behavior:"smooth"}),_("onScrollFinish"))}),(f,c)=>(o(),n(u,null,[(o(!0),n(u,null,b(s(h),(I,t)=>(o(),n("div",{class:"mb-4",ref_for:!0,ref:e=>i.value[t]=e},[s(m).getIssue(t)?(o(),n(u,{key:0},[r("div",L,[d(s(w),{image:s(m).getIssueImage(t),size:"xlarge",shape:"rectangle",class:"mr-2"},null,8,["image"]),d(s(x),{text:"",onClick:e=>s(N).push(`/election/${s(m).currentElection.id}/issue/${t}`)},{default:S(()=>[j(E(s(m).getIssueTitle(t)),1)]),_:2},1032,["onClick"])]),r("div",null,[(o(!0),n(u,null,b(Object.groupBy(I,e=>e.author_id),(e,l)=>(o(),y(R,{opinions:e,candidateId:Number(l)},null,8,["opinions","candidateId"]))),256))])],64)):A("",!0)],512))),256)),d(s(F))],64))}},H={class:"flex flex-column"},J=r("div",{class:"flex justify-content-center"},[r("h5",null,"Afficher les opinions par:")],-1),K={class:"flex justify-content-center"},P=r("div",{class:"flex justify-content-center"},[r("h5",null,"Aller à:")],-1),Q={class:"flex justify-content-center mb-4",style:{"max-width":"600px",margin:"auto","flex-wrap":"wrap"}},U={class:"grid"},W={class:"lg:col-offset-3 lg:col-6 md:col-offset-2 md:col-8 col-offset-1 col-10"},se={__name:"ElectionMain",setup(k){const v=$("author_id"),g=O(),_=t=>v.value==t,h=(t,e)=>{v.value=t,e.target.blur()},a=V(()=>Object.groupBy(g.currentElection.opinions,t=>t[v.value])),m=t=>{if(t)return`${t.firstname} ${t.lastname}`},i=$(null),f=$(null),c=(t,e)=>{i.value=t,e.target.blur()},I=(t,e)=>{f.value=t,e.target.blur()};return(t,e)=>(o(),n(u,null,[r("div",H,[J,r("div",K,[d(s(x),{severity:_("author_id")?"primary":"secondary",label:"Candidat",class:"mx-2",onClick:e[0]||(e[0]=l=>h("author_id",l)),rounded:"",size:"small"},null,8,["severity"]),d(s(x),{severity:_("issue_id")?"primary":"secondary",label:"Thème",class:"mx-2",onClick:e[1]||(e[1]=l=>h("issue_id",l)),rounded:"",size:"small"},null,8,["severity"])]),d(s(C)),P,r("div",Q,[_("author_id")?(o(!0),n(u,{key:0},b(s(g).currentElection.candidates,l=>(o(),y(s(x),{label:m(l),class:"mx-2",text:"",size:"small",severity:"primary",onClick:p=>c(l.id,p)},null,8,["label","onClick"]))),256)):(o(!0),n(u,{key:1},b(s(g).currentElection.issues,l=>(o(),y(s(x),{label:l.title,class:"mx-1",text:"",size:"small",severity:"primary",onClick:p=>I(l.id,p)},null,8,["label","onClick"]))),256))])]),d(s(C)),r("div",U,[r("div",W,[_("author_id")?(o(),y(D,{key:0,groupedOpinions:a.value,scrollToAuthorId:i.value,onOnScrollFinish:e[2]||(e[2]=l=>i.value=null)},null,8,["groupedOpinions","scrollToAuthorId"])):(o(),y(q,{key:1,groupedOpinions:a.value,scrollToIssueId:f.value,onOnScrollFinish:e[3]||(e[3]=l=>f.value=null)},null,8,["groupedOpinions","scrollToIssueId"]))])])],64))}};export{se as default};
