import{i as N,q as V,r as l,u as j,v as k,x as C,w as S,p as A,c as r,f as s,m as L,j as M,g as i,b as f,F as x,a as P,e as R,o as u,l as T,y as z,n as F}from"./index-bkX1Oe7y.js";import{a as H,_ as O}from"./carouselstyle.esm-VyuxRQ_H.js";import"./AppOpinion-arXcexPZ.js";import{_ as U}from"./_plugin-vue_export-helper-x3n3nnut.js";const q={class:"pt-2 w-full"},D={class:"issue-name-zone justify-content-center"},G=["src"],J={class:"text-4xl"},K={class:"flex flex-wrap justify-content-center mb-6",style:{"max-width":"800px",margin:"auto"}},Q={style:{"z-index":"1",position:"relative"}},W={class:"flex"},X={class:"lg:col-offset-3 lg:col-6 md:col-offset-2 md:col-8 col"},Y=["innerHTML"],Z={__name:"ElectionIssue",setup(ee){const b=N("$groupArrayBy"),g=V(),c=l(null),I=l(null),a=l(null),n=l(null),d=l(!1),p=j(),v=t=>{I.value=Number(t.electionId),a.value=Number(t.issueId)};k(()=>{v(g.params),window.scroll({top:0,behavior:"smooth"})}),C((t,e)=>{v(t.params),c.value=null}),S(a,()=>n.value=p.getIssue(a.value));const $=A(()=>{if(!p.currentElection.opinions)return[];let t=p.currentElection.opinions.filter(e=>c.value?e.author_id==c.value:!0).filter(e=>e.issue_id==a.value);return b(t,e=>e.author_id)}),m=l({}),B=t=>{var e;(e=m.value[t])==null||e.scrollIntoView({behavior:"smooth"})};return(t,e)=>{var _,h,w;return u(),r(x,null,[s("div",q,[s("div",D,[(_=n.value)!=null&&_.photo?(u(),r("img",{key:0,src:(h=n.value)==null?void 0:h.photo,width:"150"},null,8,G)):L("",!0),s("div",null,[s("span",J,M((w=n.value)==null?void 0:w.title),1)]),s("div",null,[i(f(T),{label:"Plus d'infos",text:"",severity:"primary",onClick:e[0]||(e[0]=o=>d.value=!0)})])]),s("div",K,[i(H,{onScroll:e[1]||(e[1]=o=>B(o))})]),s("div",Q,[s("div",W,[s("div",X,[(u(!0),r(x,null,P($.value,(o,y)=>(u(),r("div",{ref_for:!0,ref:E=>m.value[y]=E},[i(O,{opinions:o,candidateId:Number(y),collapsed:!1},null,8,["opinions","candidateId"])],512))),256))])])]),i(f(z),{visible:d.value,"onUpdate:visible":e[2]||(e[2]=o=>d.value=o),header:"Plus d'infos",class:"w-11 md:w-20rem lg:w-30rem"},{default:R(()=>{var o;return[s("p",{style:{"white-space":"pre-wrap"},innerHTML:(o=n.value)==null?void 0:o.short_description},null,8,Y)]}),_:1},8,["visible"])]),i(f(F))],64)}}},ne=U(Z,[["__scopeId","data-v-c1630f29"]]);export{ne as default};
