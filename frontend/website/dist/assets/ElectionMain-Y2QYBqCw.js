import{t as C,r as $,u as O,w as B,o,c as r,F as p,a as b,b as n,d as c,e as s,f as S,g as j,h as E,i as A,j as y,k as z}from"./index-ycAmBI8-.js";import{s as N,a as x,b as w,c as T}from"./panel.esm-K5aAKKLT.js";import{_ as V}from"./AppIssueOpinionsPanel-53fOt0om.js";import{_ as M}from"./AppCandidateOpinionsPanel-3D_3U0T1.js";const R={class:"flex align-items-center"},G={__name:"ElectionMainOpinionsByAuthor",props:{groupedOpinions:{type:Object,default:{}},scrollToAuthorId:{type:Number}},emits:["onScrollFinish"],setup(I,{emit:f}){const _=I,d=f,{groupedOpinions:g,scrollToAuthorId:i}=C(_),m=$({}),u=O(),h=v=>{if(v)return`${v.firstname} ${v.lastname}`};return B(i,()=>{i.value&&(m.value[i.value].scrollIntoView({behavior:"smooth"}),d("onScrollFinish"))}),(v,k)=>(o(),r(p,null,[(o(!0),r(p,null,b(s(g),(t,e)=>{var l;return o(),r("div",{class:"mb-4",ref_for:!0,ref:a=>m.value[e]=a},[n("div",R,[c(s(N),{image:(l=s(u).getCandidate(e))==null?void 0:l.photo,size:"xlarge",shape:"rectangle",class:"mr-2"},null,8,["image"]),c(s(x),{text:"",onClick:a=>s(A).push(`/election/${s(u).currentElection.id}/candidate/${e}`)},{default:S(()=>[j(E(h(s(u).getCandidate(e))),1)]),_:2},1032,["onClick"])]),n("div",null,[(o(!0),r(p,null,b(Object.groupBy(t,a=>a.issue_id),(a,F)=>(o(),y(V,{opinions:a,issueId:Number(F)},null,8,["opinions","issueId"]))),256))])],512)}),256)),c(s(w))],64))}},D={class:"flex align-items-center"},L={__name:"ElectionMainOpinionsByIssue",props:{groupedOpinions:{type:Object,default:{}},scrollToIssueId:{type:Number}},emits:["onScrollFinish"],setup(I,{emit:f}){const _=I,d=f,{groupedOpinions:g,scrollToIssueId:i}=C(_),m=O(),u=$({});return B(i,()=>{i.value&&(u.value[i.value].scrollIntoView({behavior:"smooth"}),d("onScrollFinish"))}),(h,v)=>(o(),r(p,null,[(o(!0),r(p,null,b(s(g),(k,t)=>(o(),r("div",{class:"mb-4",ref_for:!0,ref:e=>u.value[t]=e},[n("div",D,[c(s(N),{image:s(m).getIssueImage(t),size:"xlarge",shape:"rectangle",class:"mr-2"},null,8,["image"]),c(s(x),{text:"",onClick:e=>s(A).push(`/election/${s(m).currentElection.id}/issue/${t}`)},{default:S(()=>[j(E(s(m).getIssueTitle(t)),1)]),_:2},1032,["onClick"])]),n("div",null,[(o(!0),r(p,null,b(Object.groupBy(k,e=>e.author_id),(e,l)=>(o(),y(M,{opinions:e,candidateId:Number(l)},null,8,["opinions","candidateId"]))),256))])],512))),256)),c(s(w))],64))}},q={class:"flex flex-column"},H=n("div",{class:"flex justify-content-center"},[n("h5",null,"Afficher les opinions par:")],-1),J={class:"flex justify-content-center"},K=n("div",{class:"flex justify-content-center"},[n("h5",null,"Aller à:")],-1),P={class:"flex justify-content-center mb-4",style:{"max-width":"600px",margin:"auto","flex-wrap":"wrap"}},Q={class:"grid"},U={class:"lg:col-offset-3 lg:col-6 md:col-offset-2 md:col-8 col-offset-1 col-10"},ee={__name:"ElectionMain",setup(I){const f=$("author_id"),_=O(),d=t=>f.value==t,g=(t,e)=>{f.value=t,e.target.blur()},i=z(()=>Object.groupBy(_.currentElection.opinions,t=>t[f.value])),m=t=>{if(t)return`${t.firstname} ${t.lastname}`},u=$(null),h=$(null),v=(t,e)=>{u.value=t,e.target.blur()},k=(t,e)=>{h.value=t,e.target.blur()};return(t,e)=>(o(),r(p,null,[n("div",q,[H,n("div",J,[c(s(x),{severity:d("author_id")?"primary":"secondary",label:"Candidat",class:"mx-2",onClick:e[0]||(e[0]=l=>g("author_id",l)),rounded:"",size:"small"},null,8,["severity"]),c(s(x),{severity:d("issue_id")?"primary":"secondary",label:"Thème",class:"mx-2",onClick:e[1]||(e[1]=l=>g("issue_id",l)),rounded:"",size:"small"},null,8,["severity"])]),c(s(T)),K,n("div",P,[d("author_id")?(o(!0),r(p,{key:0},b(s(_).currentElection.candidates,l=>(o(),y(s(x),{label:m(l),class:"mx-2",text:"",size:"small",severity:"primary",onClick:a=>v(l.id,a)},null,8,["label","onClick"]))),256)):(o(!0),r(p,{key:1},b(s(_).currentElection.issues,l=>(o(),y(s(x),{label:l.title,class:"mx-1",text:"",size:"small",severity:"primary",onClick:a=>k(l.id,a)},null,8,["label","onClick"]))),256))])]),c(s(T)),n("div",Q,[n("div",U,[d("author_id")?(o(),y(G,{key:0,groupedOpinions:i.value,scrollToAuthorId:u.value,onOnScrollFinish:e[2]||(e[2]=l=>u.value=null)},null,8,["groupedOpinions","scrollToAuthorId"])):(o(),y(L,{key:1,groupedOpinions:i.value,scrollToIssueId:h.value,onOnScrollFinish:e[3]||(e[3]=l=>h.value=null)},null,8,["groupedOpinions","scrollToIssueId"]))])])],64))}};export{ee as default};
