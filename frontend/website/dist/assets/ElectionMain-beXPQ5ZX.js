import{B as G,o as l,c as r,m as y,r as k,a as g,b as n,i as x,t as w,d as B,u as N,w as E,F as f,e as I,f as t,g as d,h as A,j as F,k as V,l as T,n as b,p as D}from"./index-U1xGrvUd.js";import{s as L,a as z,b as O,c as M,d as j}from"./panel.esm-gpRnQs_B.js";import{_ as P,a as q}from"./AppIssuesSelector-Nl5RzCuO.js";import{_ as H,a as J}from"./AppCandidatesSelector-jkVf0tUk.js";var K={root:"p-card p-component",header:"p-card-header",body:"p-card-body",caption:"p-card-caption",title:"p-card-title",subtitle:"p-card-subtitle",content:"p-card-content",footer:"p-card-footer"},Q=G.extend({name:"card",classes:K}),U={name:"BaseCard",extends:L,style:Q},R={name:"Card",extends:U};function W(e,$,v,_,m,h){return l(),r("div",y({class:e.cx("root")},e.ptm("root"),{"data-pc-name":"card"}),[e.$slots.header?(l(),r("div",y({key:0,class:e.cx("header")},e.ptm("header")),[k(e.$slots,"header")],16)):g("",!0),n("div",y({class:e.cx("body")},e.ptm("body")),[e.$slots.title||e.$slots.subtitle?(l(),r("div",y({key:0,class:e.cx("caption")},e.ptm("caption")),[e.$slots.title?(l(),r("div",y({key:0,class:e.cx("title")},e.ptm("title")),[k(e.$slots,"title")],16)):g("",!0),e.$slots.subtitle?(l(),r("div",y({key:1,class:e.cx("subtitle")},e.ptm("subtitle")),[k(e.$slots,"subtitle")],16)):g("",!0)],16)):g("",!0),n("div",y({class:e.cx("content")},e.ptm("content")),[k(e.$slots,"content")],16),e.$slots.footer?(l(),r("div",y({key:1,class:e.cx("footer")},e.ptm("footer")),[k(e.$slots,"footer")],16)):g("",!0)],16)],16)}R.render=W;const X={class:"flex align-items-center"},Y={class:"flex flex-column"},Z={key:0,class:"font-bold ml-3 font-light uppercase",style:{color:"#797979"}},ee={__name:"ElectionMainOpinionsByAuthor",props:{groupedOpinions:{type:Object,default:{}},scrollToAuthorId:{type:Number}},emits:["onScrollFinish"],setup(e,{emit:$}){const v=x("$groupArrayBy"),_=e,m=$,{groupedOpinions:h,scrollToAuthorId:p}=w(_),a=B({}),u=N();return E(p,()=>{var c;p.value&&((c=a.value[p.value])==null||c.scrollIntoView({behavior:"smooth"}),m("onScrollFinish"))}),(c,S)=>(l(),r(f,null,[(l(!0),r(f,null,I(t(h),(i,s)=>(l(),r("div",{class:"mb-4",ref_for:!0,ref:o=>a.value[s]=o},[t(u).getCandidate(s)?(l(),r(f,{key:0},[d(t(R),null,{content:A(()=>{var o;return[n("div",X,[d(t(z),{image:(o=t(u).getCandidate(s))==null?void 0:o.photo,size:"xlarge",shape:"rectangle",class:"mr-2"},null,8,["image"]),n("div",Y,[d(t(O),{text:"",onClick:C=>t(F).push(`/election/${t(u).currentElection.id}/candidate/${s}`)},{default:A(()=>[V(T(t(u).getCandidateName(s)),1)]),_:2},1032,["onClick"]),t(u).hasCandidateOrganisations(s)?(l(),r("span",Z,T(t(u).getCandidateOrganisationsStr(s)),1)):g("",!0)])])]}),_:2},1024),n("div",null,[(l(!0),r(f,null,I(t(v)(i,o=>o.issue_id),(o,C)=>(l(),b(P,{opinions:o,issueId:Number(C)},null,8,["opinions","issueId"]))),256))])],64)):g("",!0)],512))),256)),d(t(M))],64))}},se={class:"flex align-items-center"},te={__name:"ElectionMainOpinionsByIssue",props:{groupedOpinions:{type:Object,default:{}},scrollToIssueId:{type:Number}},emits:["onScrollFinish"],setup(e,{emit:$}){const v=x("$groupArrayBy"),_=e,m=$,{groupedOpinions:h,scrollToIssueId:p}=w(_),a=N(),u=B({});return E(p,()=>{var c;p.value&&((c=u.value[p.value])==null||c.scrollIntoView({behavior:"smooth"}),m("onScrollFinish"))}),(c,S)=>(l(),r(f,null,[(l(!0),r(f,null,I(t(h),(i,s)=>(l(),r("div",{class:"mb-4",ref_for:!0,ref:o=>u.value[s]=o},[t(a).getIssue(s)?(l(),r(f,{key:0},[n("div",se,[d(t(z),{image:t(a).getIssueImage(s),size:"xlarge",shape:"rectangle",class:"mr-2"},null,8,["image"]),d(t(O),{text:"",onClick:o=>t(F).push(`/election/${t(a).currentElection.id}/issue/${s}`)},{default:A(()=>[V(T(t(a).getIssueTitle(s)),1)]),_:2},1032,["onClick"])]),n("div",null,[(l(!0),r(f,null,I(t(v)(i,o=>o.author_id),(o,C)=>(l(),b(H,{opinions:o,candidateId:Number(C)},null,8,["opinions","candidateId"]))),256))])],64)):g("",!0)],512))),256)),d(t(M))],64))}},oe={class:"flex flex-column"},le=n("div",{class:"flex justify-content-center"},[n("h5",null,"Afficher les opinions par:")],-1),re={class:"flex justify-content-center"},ne=n("div",{class:"flex justify-content-center"},[n("h5",null,"Aller à:")],-1),ie={class:"flex justify-content-center mb-4",style:{"max-width":"800px",margin:"auto","flex-wrap":"wrap"}},ae={class:"grid"},ue={class:"lg:col-offset-3 lg:col-6 md:col-offset-2 md:col-8 col-offset-1 col-10"},fe={__name:"ElectionMain",setup(e){const $=x("$groupArrayBy"),v=B("author_id"),_=N(),m=i=>v.value==i,h=(i,s)=>{v.value=i,s.target.blur()},p=D(()=>$(_.currentElection.opinions,i=>i[v.value])),a=B(null),u=i=>{a.value=i},c=B(null),S=i=>{c.value=i};return(i,s)=>(l(),r(f,null,[n("div",oe,[le,n("div",re,[d(t(O),{severity:m("author_id")?"primary":"secondary",label:"Candidat",class:"mx-2",onClick:s[0]||(s[0]=o=>h("author_id",o)),rounded:"",size:"small"},null,8,["severity"]),d(t(O),{severity:m("issue_id")?"primary":"secondary",label:"Thème",class:"mx-2",onClick:s[1]||(s[1]=o=>h("issue_id",o)),rounded:"",size:"small"},null,8,["severity"])]),d(t(j)),ne,n("div",ie,[m("author_id")?(l(),b(J,{key:0,onScroll:s[2]||(s[2]=o=>u(o))})):(l(),b(q,{key:1,onScroll:s[3]||(s[3]=o=>S(o))}))])]),d(t(j)),n("div",ae,[n("div",ue,[m("author_id")?(l(),b(ee,{key:0,groupedOpinions:p.value,scrollToAuthorId:a.value,onOnScrollFinish:s[4]||(s[4]=o=>a.value=null)},null,8,["groupedOpinions","scrollToAuthorId"])):(l(),b(te,{key:1,groupedOpinions:p.value,scrollToIssueId:c.value,onOnScrollFinish:s[5]||(s[5]=o=>c.value=null)},null,8,["groupedOpinions","scrollToIssueId"]))])])],64))}};export{fe as default};
