import{a as V,r as v,u as O,c as f,b as o,e,f as s,w as a,o as h,g as j,p as E,h as T,A as U,i as x,_ as I}from"./index-WTV3Oe8z.js";import{s as $,a as p,b as D}from"./toolbar.esm-vkQG1weS.js";import{s as r}from"./index.esm-ec_-wxVn.js";import{u as F}from"./issues-zWip9pHN.js";import{u as P}from"./opinions-ojKKZAA2.js";import{_ as B}from"./_plugin-vue_export-helper-x3n3nnut.js";const g=d=>(E("data-v-bbf42625"),d=d(),T(),d),N={class:"grid"},q={class:"col-12"},L={key:0,class:"card"},M={class:"my-2"},R=g(()=>o("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},[o("h5",{class:"m-0"},"Thèmes")],-1)),z={key:1,class:"px-4 py-5 shadow-1 flex flex-column md:flex-row md:align-items-center justify-content-between mb-3",style:{width:"600px","background-color":"white"}},G=g(()=>o("div",null,[o("div",{class:"font-medium text-xl mt-2 mb-3"},"Aucun thème"),o("div",{class:"font-medium"},"Cliquer sur le bouton suivant pour rajouter un premier thème à la base de données")],-1)),H={class:"mt-4 mr-auto md:mt-0 md:mr-0"},J={__name:"IssuesView",setup(d){const i=F(),w=P();V(i.refreshIssues);const n=v(null),m=v(!1),y=()=>{var l;let t=(l=n.value)==null?void 0:l.map(c=>c.id);m.value=!0,U.issues.deleteIssues(t).then(()=>{i.refreshIssues(),n.value=null}).finally(()=>m.value=!1)},b=O(),k=x(()=>I(()=>import("./IssuesUpsertForm-RTGxMU6V.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),_=(t={})=>{b.open(k,{data:t,onClose:i.refreshIssues,props:{modal:!0}})},C=x(()=>I(()=>import("./OpinionsUpsertForm-BDQDGLiC.js"),__vite__mapDeps([7,1,2,3,4,5,6,8,9,10]))),S=(t={})=>{b.open(C,{data:{issue_id:t==null?void 0:t.id},onClose:w.refreshOpinions,props:{modal:!0}})};return(t,l)=>{var c;return h(),f("div",N,[o("div",q,[((c=e(i).issues)==null?void 0:c.length)>0?(h(),f("div",L,[s(e($),{class:"mb-4"},{start:a(()=>[o("div",M,[s(e(r),{label:"Ajouter un thème politique",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:_}),s(e(r),{label:"Supprimer la sélection",icon:"pi pi-trash",class:"p-button-danger",onClick:y,disabled:!n.value||!n.value.length,loading:m.value},null,8,["disabled","loading"])])]),_:1}),s(e(D),{value:e(i).issues,selection:n.value,"onUpdate:selection":l[0]||(l[0]=u=>n.value=u)},{header:a(()=>[R]),default:a(()=>[s(e(p),{selectionMode:"multiple",headerStyle:"width: 3rem"}),s(e(p),{headerStyle:"min-width: 100px"},{body:a(({data:u})=>[s(e(r),{class:"p-button-text p-button-rounded",icon:"pi pi-pencil",onClick:A=>_(u)},null,8,["onClick"]),s(e(r),{class:"p-button-text p-button-rounded",icon:"pi pi-megaphone",onClick:A=>S(u)},null,8,["onClick"])]),_:1}),s(e(p),{field:"title",header:"Titre"}),s(e(p),{field:"short_description",header:"Description"})]),_:1},8,["value","selection"])])):(h(),f("div",z,[G,o("div",H,[s(e(r),{class:"p-button font-bold px-5 py-3 p-button-success p-button-rounded p-button-raised",onClick:_},{default:a(()=>[j("Ajouter")]),_:1})])]))])])}}},ee=B(J,[["__scopeId","data-v-bbf42625"]]);export{ee as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/IssuesUpsertForm-RTGxMU6V.js","assets/message.esm-lLN3A014.js","assets/index-WTV3Oe8z.js","assets/index-tbN9M-MT.css","assets/index.esm-ec_-wxVn.js","assets/textarea.esm-qGZGSlSC.js","assets/editor.esm-HsM_u6D7.js","assets/OpinionsUpsertForm-BDQDGLiC.js","assets/toolbar.esm-vkQG1weS.js","assets/persons-9b3NuM6v.js","assets/issues-zWip9pHN.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
