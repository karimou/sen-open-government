import{d as g,r as v,A as b,a as w,u as k,c as _,b as o,e,f as t,w as c,o as h,g as C,h as A,_ as S}from"./index-hz0RWW_t.js";import{s as j,a as n,b as V}from"./toolbar.esm--yWOjs_u.js";import{s as r}from"./index.esm-fL_-_ufj.js";const D=g("elections",()=>{const u=v(null);return{elections:u,refreshElections:()=>{b.elections.listElections().then(s=>u.value=s)}}}),T={class:"grid"},$={class:"col-12"},B={key:0,class:"card"},N={class:"my-2"},P=o("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},[o("h5",{class:"m-0"},"Élections")],-1),U={key:1,class:"px-4 py-5 shadow-1 flex flex-column md:flex-row md:align-items-center justify-content-between mb-3",style:{width:"600px","background-color":"white"}},F=o("div",null,[o("div",{class:"font-medium text-xl mt-2 mb-3"},"Aucune élection"),o("div",{class:"font-medium"},"Cliquer sur le bouton suivant pour rajouter une première élection à la base de données")],-1),I={class:"mt-4 mr-auto md:mt-0 md:mr-0"},R={__name:"ElectionsView",setup(u){const l=D();w(l.refreshElections);const s=v(null),p=v(!1),x=()=>{var i;let a=(i=s.value)==null?void 0:i.map(d=>d.id);p.value=!0,b.elections.deleteElections(a).then(()=>{l.refreshElections(),s.value=null}).finally(()=>p.value=!1)},E=k(),y=A(()=>S(()=>import("./ElectionsUpsertForm-7DrkUu4Q.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),m=(a={})=>{E.open(y,{data:a,onClose:l.refreshElections,props:{modal:!0}})};return(a,i)=>{var d;return h(),_("div",T,[o("div",$,[((d=e(l).elections)==null?void 0:d.length)>0?(h(),_("div",B,[t(e(j),{class:"mb-4"},{start:c(()=>[o("div",N,[t(e(r),{label:"Ajouter une élection",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:m}),t(e(r),{label:"Supprimer la sélection",icon:"pi pi-trash",class:"p-button-danger",onClick:x,disabled:!s.value||!s.value.length,loading:p.value},null,8,["disabled","loading"])])]),_:1}),t(e(V),{value:e(l).elections,selection:s.value,"onUpdate:selection":i[0]||(i[0]=f=>s.value=f)},{header:c(()=>[P]),default:c(()=>[t(e(n),{selectionMode:"multiple",headerStyle:"width: 3rem"}),t(e(n),{headerStyle:"min-width: 100px"},{body:c(({data:f})=>[t(e(r),{class:"p-button-text p-button-rounded",icon:"pi pi-pencil",onClick:M=>m(f)},null,8,["onClick"])]),_:1}),t(e(n),{field:"title",header:"Titre"}),t(e(n),{field:"type",header:"Type"}),t(e(n),{field:"date",header:"Date"}),t(e(n),{field:"description",header:"Description"})]),_:1},8,["value","selection"])])):(h(),_("div",U,[F,o("div",I,[t(e(r),{class:"p-button font-bold px-5 py-3 p-button-success p-button-rounded p-button-raised",onClick:m},{default:c(()=>[C("Ajouter")]),_:1})])]))])])}}};export{R as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ElectionsUpsertForm-7DrkUu4Q.js","assets/message.esm-TrzrTVKT.js","assets/index-hz0RWW_t.js","assets/index-tbN9M-MT.css","assets/index.esm-fL_-_ufj.js","assets/textarea.esm-mUQgP30i.js","assets/radiobutton.esm-XHmqgTw8.js","assets/format-39s6QTMr.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
