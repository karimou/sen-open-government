import{$ as N,r as O,u as T,a as d,c as f,b as n,f as e,e as _,g as t,w as i,j as k,E as I,h as R,A as U,i as P,_ as w}from"./index-F1RqSK8B.js";import{s as L,a as u,b as q,_ as z}from"./AppTableSkeleton-K44dyUfr.js";import{s as c}from"./index.esm-W4H87m11.js";import{s as M}from"./avatar.esm-J09aueqf.js";const G={class:"grid"},H={class:"col-12"},J={key:1,class:"card"},K={class:"my-2"},Q=n("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},[n("h5",{class:"m-0"},"Personnes")],-1),W={class:"truncate l3"},X={key:2,class:"px-4 py-5 shadow-1 flex flex-column md:flex-row md:align-items-center justify-content-between mb-3",style:{width:"600px","background-color":"white"}},Y=n("div",null,[n("div",{class:"font-medium text-xl mt-2 mb-3"},"Aucune persone"),n("div",{class:"font-medium"},"Cliquer sur le bouton suivant pour rajouter une première personne à la base de données")],-1),Z={class:"mt-4 mr-auto md:mt-0 md:mr-0"},ne={__name:"BasePersonsTable",props:{persons:Array,addFunction:{type:Function,default:null},deleteFunction:{type:Function,default:null},loading:{type:Boolean,default:!1},hideDescription:{type:Boolean,default:!1}},emits:["refresh"],setup(C,{emit:F}){const A=C,{persons:h,loading:a,addFunction:v,deleteFunction:b,hideDescription:$}=N(A),m=F,l=O(null),B=()=>{var s;let r=(s=l.value)==null?void 0:s.map(p=>p.id);a.value=!0,U.persons.deletePersons(r).then(()=>{m("refresh"),l.value=null}).finally(()=>a.value=!1)},D=()=>{if(b.value)a.value=!0,b.value(l.value).then(()=>a.value=!1).then(()=>m("refresh"));else return B()},y=T(),S=P(()=>w(()=>import("./PersonsUpsertForm-7bX3mvk3.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),g=(r={})=>{y.open(S,{data:r,onClose:()=>m("refresh"),props:{modal:!0}})},x=()=>v.value?v.value():g(),j=P(()=>w(()=>import("./PersonsOpinions-1HRXT8zb.js"),__vite__mapDeps([13,14,2,3,15,9,5,16]))),E=(r={})=>{y.open(j,{data:r,props:{modal:!0}})};return(r,s)=>{var p;return d(),f("div",G,[n("div",H,[e(a)?(d(),_(z,{key:0})):((p=e(h))==null?void 0:p.length)>0?(d(),f("div",J,[t(e(L),{class:"mb-4"},{start:i(()=>[n("div",K,[t(e(c),{label:"Ajouter une personne",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:s[0]||(s[0]=()=>x())}),t(e(c),{label:"Supprimer la sélection",icon:"pi pi-trash",class:"p-button-danger",onClick:s[1]||(s[1]=()=>D()),disabled:!l.value||!l.value.length,loading:e(a)},null,8,["disabled","loading"])])]),_:1}),t(e(q),{value:e(h),selection:l.value,"onUpdate:selection":s[2]||(s[2]=o=>l.value=o)},{header:i(()=>[Q]),default:i(()=>[t(e(u),{selectionMode:"multiple",headerStyle:"width: 3rem"}),t(e(u),{headerStyle:"width: 120px"},{body:i(({data:o})=>[t(e(c),{class:"p-button-text p-button-rounded",icon:"pi pi-pencil",onClick:V=>g(o)},null,8,["onClick"]),t(e(c),{class:"p-button-text p-button-rounded",icon:"pi pi-megaphone",onClick:V=>E(o)},null,8,["onClick"])]),_:1}),t(e(u),{field:"photo",headerStyle:"width: 100px"},{body:i(({data:o})=>[o.photo?(d(),_(e(M),{key:0,class:"contained-image",image:o.photo,size:"xlarge",shape:"rectangle"},null,8,["image"])):k("",!0)]),_:1}),t(e(u),{field:"firstname",header:"Prénom"}),t(e(u),{field:"lastname",header:"Nom"}),e($)?k("",!0):(d(),_(e(u),{key:0,field:"description",header:"Description",headerStyle:"width: 500px"},{body:i(({data:o})=>[n("p",W,I(o.description),1)]),_:1}))]),_:1},8,["value","selection"])])):(d(),f("div",X,[Y,n("div",Z,[t(e(c),{class:"p-button font-bold px-5 py-3 p-button-success p-button-rounded p-button-raised",onClick:s[3]||(s[3]=()=>x())},{default:i(()=>[R("Ajouter")]),_:1})])]))])])}}};export{ne as _};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/PersonsUpsertForm-7bX3mvk3.js","assets/index.esm-7vlYWs5j.js","assets/index-F1RqSK8B.js","assets/index-ZWerLMmy.css","assets/message.esm-FZNGV9Fe.js","assets/index.esm-W4H87m11.js","assets/textarea.esm-FGC31d1c.js","assets/editor.esm-kq0G3DuG.js","assets/AppPicturesSelector-2pmqlMqZ.js","assets/AppTableSkeleton-K44dyUfr.js","assets/fileupload.esm-_Xhm3CsQ.js","assets/index.esm-9dU2qWzq.js","assets/format-39s6QTMr.js","assets/PersonsOpinions-1HRXT8zb.js","assets/opinions-MrbLVSof.js","assets/BaseOpinionsTable-VTNsvZcU.js","assets/avatar.esm-J09aueqf.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
