import{a as I,r as b,u as V,c as f,b as t,e,f as s,w as l,o as h,g as O,p as j,h as E,A as U,i as x,_ as P}from"./index-Tc2rU4CK.js";import{s as $,a,b as D}from"./toolbar.esm-R8O2odAH.js";import{s as d}from"./index.esm-vGdYQZef.js";import{u as F}from"./persons-42d0aucH.js";import{u as N}from"./opinions-wD_XwGyD.js";import{_ as B}from"./_plugin-vue_export-helper-x3n3nnut.js";const g=c=>(j("data-v-d1d396f1"),c=c(),E(),c),T={class:"grid"},L={class:"col-12"},M={key:0,class:"card"},R={class:"my-2"},q=g(()=>t("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},[t("h5",{class:"m-0"},"Personnes")],-1)),z={key:1,class:"px-4 py-5 shadow-1 flex flex-column md:flex-row md:align-items-center justify-content-between mb-3",style:{width:"600px","background-color":"white"}},G=g(()=>t("div",null,[t("div",{class:"font-medium text-xl mt-2 mb-3"},"Aucune persone"),t("div",{class:"font-medium"},"Cliquer sur le bouton suivant pour rajouter une première personne à la base de données")],-1)),H={class:"mt-4 mr-auto md:mt-0 md:mr-0"},J={__name:"PersonsView",setup(c){const r=F(),w=N();I(r.refreshPersons);const n=b(null),m=b(!1),y=()=>{var i;let o=(i=n.value)==null?void 0:i.map(p=>p.id);m.value=!0,U.persons.deletePersons(o).then(()=>{r.refreshPersons(),n.value=null}).finally(()=>m.value=!1)},v=V(),k=x(()=>P(()=>import("./PersonsUpsertForm-5endkinW.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),_=(o={})=>{v.open(k,{data:o,onClose:r.refreshPersons,props:{modal:!0}})},C=x(()=>P(()=>import("./OpinionsUpsertForm-MJd3x8sK.js"),__vite__mapDeps([8,1,2,3,4,5,6,9,10,11]))),S=(o={})=>{v.open(C,{data:{author_id:o==null?void 0:o.id},onClose:w.refreshOpinions,props:{modal:!0}})};return(o,i)=>{var p;return h(),f("div",T,[t("div",L,[((p=e(r).persons)==null?void 0:p.length)>0?(h(),f("div",M,[s(e($),{class:"mb-4"},{start:l(()=>[t("div",R,[s(e(d),{label:"Ajouter une personne",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:_}),s(e(d),{label:"Supprimer la sélection",icon:"pi pi-trash",class:"p-button-danger",onClick:y,disabled:!n.value||!n.value.length,loading:m.value},null,8,["disabled","loading"])])]),_:1}),s(e(D),{value:e(r).persons,selection:n.value,"onUpdate:selection":i[0]||(i[0]=u=>n.value=u)},{header:l(()=>[q]),default:l(()=>[s(e(a),{selectionMode:"multiple",headerStyle:"width: 3rem"}),s(e(a),{headerStyle:"min-width: 100px"},{body:l(({data:u})=>[s(e(d),{class:"p-button-text p-button-rounded",icon:"pi pi-pencil",onClick:A=>_(u)},null,8,["onClick"]),s(e(d),{class:"p-button-text p-button-rounded",icon:"pi pi-megaphone",onClick:A=>S(u)},null,8,["onClick"])]),_:1}),s(e(a),{field:"firstname",header:"Prénom"}),s(e(a),{field:"lastname",header:"Nom"}),s(e(a),{field:"description",header:"Description"})]),_:1},8,["value","selection"])])):(h(),f("div",z,[G,t("div",H,[s(e(d),{class:"p-button font-bold px-5 py-3 p-button-success p-button-rounded p-button-raised",onClick:_},{default:l(()=>[O("Ajouter")]),_:1})])]))])])}}},ee=B(J,[["__scopeId","data-v-d1d396f1"]]);export{ee as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/PersonsUpsertForm-5endkinW.js","assets/message.esm-7AaCCNeN.js","assets/index-Tc2rU4CK.js","assets/index-tbN9M-MT.css","assets/index.esm-vGdYQZef.js","assets/textarea.esm-Zp6g0_lQ.js","assets/editor.esm-M_ny7rpB.js","assets/format-39s6QTMr.js","assets/OpinionsUpsertForm-MJd3x8sK.js","assets/toolbar.esm-R8O2odAH.js","assets/persons-42d0aucH.js","assets/issues-VKptyOP5.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
