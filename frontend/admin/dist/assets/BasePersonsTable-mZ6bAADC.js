import{$ as S,r as O,u as T,a as r,c as f,b as o,f as e,e as _,g as t,w as d,j as k,h as I,A as R,i as P,_ as w}from"./index-nfabErwM.js";import{s as U,a as u,b as L,_ as q}from"./AppTableSkeleton-ccuFNckQ.js";import{s as c}from"./index.esm-GIVjqfaJ.js";import{s as z}from"./avatar.esm-gtHlE3uH.js";const M={class:"grid"},G={class:"col-12"},H={key:1,class:"card"},J={class:"my-2"},K=o("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},[o("h5",{class:"m-0"},"Personnes")],-1),Q={key:2,class:"px-4 py-5 shadow-1 flex flex-column md:flex-row md:align-items-center justify-content-between mb-3",style:{width:"600px","background-color":"white"}},W=o("div",null,[o("div",{class:"font-medium text-xl mt-2 mb-3"},"Aucune persone"),o("div",{class:"font-medium"},"Cliquer sur le bouton suivant pour rajouter une première personne à la base de données")],-1),X={class:"mt-4 mr-auto md:mt-0 md:mr-0"},se={__name:"BasePersonsTable",props:{persons:Array,addFunction:{type:Function,default:null},deleteFunction:{type:Function,default:null},loading:{type:Boolean,default:!1},hideDescription:{type:Boolean,default:!1}},emits:["refresh"],setup(C,{emit:F}){const A=C,{persons:h,loading:a,addFunction:v,deleteFunction:b,hideDescription:$}=S(A),m=F,n=O(null),B=()=>{var s;let i=(s=n.value)==null?void 0:s.map(p=>p.id);a.value=!0,R.persons.deletePersons(i).then(()=>{m("refresh"),n.value=null}).finally(()=>a.value=!1)},j=()=>{if(b.value)a.value=!0,b.value(n.value).then(()=>a.value=!1).then(()=>m("refresh"));else return B()},y=T(),D=P(()=>w(()=>import("./PersonsUpsertForm-ijhhAwcy.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),g=(i={})=>{y.open(D,{data:i,onClose:()=>m("refresh"),props:{modal:!0}})},x=()=>v.value?v.value():g(),V=P(()=>w(()=>import("./PersonsOpinions-5Lc8_kwU.js"),__vite__mapDeps([13,14,2,3,15,9,5,16]))),E=(i={})=>{y.open(V,{data:i,props:{modal:!0}})};return(i,s)=>{var p;return r(),f("div",M,[o("div",G,[e(a)?(r(),_(q,{key:0})):((p=e(h))==null?void 0:p.length)>0?(r(),f("div",H,[t(e(U),{class:"mb-4"},{start:d(()=>[o("div",J,[t(e(c),{label:"Ajouter une personne",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:s[0]||(s[0]=()=>x())}),t(e(c),{label:"Supprimer la sélection",icon:"pi pi-trash",class:"p-button-danger",onClick:s[1]||(s[1]=()=>j()),disabled:!n.value||!n.value.length,loading:e(a)},null,8,["disabled","loading"])])]),_:1}),t(e(L),{value:e(h),selection:n.value,"onUpdate:selection":s[2]||(s[2]=l=>n.value=l)},{header:d(()=>[K]),default:d(()=>[t(e(u),{selectionMode:"multiple",headerStyle:"width: 3rem"}),t(e(u),{headerStyle:"width: 120px"},{body:d(({data:l})=>[t(e(c),{class:"p-button-text p-button-rounded",icon:"pi pi-pencil",onClick:N=>g(l)},null,8,["onClick"]),t(e(c),{class:"p-button-text p-button-rounded",icon:"pi pi-megaphone",onClick:N=>E(l)},null,8,["onClick"])]),_:1}),t(e(u),{field:"photo",headerStyle:"width: 100px"},{body:d(({data:l})=>[l.photo?(r(),_(e(z),{key:0,class:"contained-image",image:l.photo,size:"xlarge",shape:"rectangle"},null,8,["image"])):k("",!0)]),_:1}),t(e(u),{field:"firstname",header:"Prénom"}),t(e(u),{field:"lastname",header:"Nom"}),e($)?k("",!0):(r(),_(e(u),{key:0,field:"description",header:"Description"}))]),_:1},8,["value","selection"])])):(r(),f("div",Q,[W,o("div",X,[t(e(c),{class:"p-button font-bold px-5 py-3 p-button-success p-button-rounded p-button-raised",onClick:s[3]||(s[3]=()=>x())},{default:d(()=>[I("Ajouter")]),_:1})])]))])])}}};export{se as _};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/PersonsUpsertForm-ijhhAwcy.js","assets/index.esm-0v3skzw3.js","assets/index-nfabErwM.js","assets/index-ZWerLMmy.css","assets/message.esm-N4VlxvCC.js","assets/index.esm-GIVjqfaJ.js","assets/textarea.esm-CrUwpLue.js","assets/editor.esm-yhnS-dCw.js","assets/AppPicturesSelector-dkCwO3YK.js","assets/AppTableSkeleton-ccuFNckQ.js","assets/fileupload.esm-aJebuPhH.js","assets/index.esm-dH5l7yLd.js","assets/format-39s6QTMr.js","assets/PersonsOpinions-5Lc8_kwU.js","assets/opinions-wtf8YSiD.js","assets/BaseOpinionsTable-iOjrzx7r.js","assets/avatar.esm-gtHlE3uH.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
