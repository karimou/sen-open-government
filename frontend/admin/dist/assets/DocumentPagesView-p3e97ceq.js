import{d as I,r as p,A as x,t as N,o as O,u as M,a as u,c as P,b as a,e as D,g as s,w as l,f as e,k as S,j as R,h as L,i as $,_ as T}from"./index-om2yVH6z.js";import{_ as U,s as z,a as d,b as F}from"./AppTableSkeleton-bFD8jdFV.js";import{s as m}from"./index.esm-BEizDpwn.js";import{s as q}from"./avatar.esm-AA-uRh8Z.js";const G=I("documentpages",()=>{const c=p(null);return{documentPages:c,refreshDocumentPages:async()=>x.documentPages.listDocumentPages().then(r=>c.value=r)}}),H={class:"grid"},J={class:"col-12"},K={key:1,class:"card"},Q={class:"my-2"},W={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},X={class:"m-0"},Y={class:"truncate l3"},Z={key:2,class:"px-4 py-5 shadow-1 flex flex-column md:flex-row md:align-items-center justify-content-between mb-3",style:{width:"600px","background-color":"white"}},ee=a("div",null,[a("div",{class:"font-medium text-xl mt-2 mb-3"},"Aucun document"),a("div",{class:"font-medium"},"Cliquer sur le bouton suivant pour rajouter une première document à la base de données")],-1),te={class:"mt-4 mr-auto md:mt-0 md:mr-0"},se={__name:"BaseDocumentPagesTable",props:{parentId:Number,parentTitle:String},setup(c){const h=c,{parentId:r,parentTitle:k}=N(h),_=p(!1),g=p([]),w=G(),v=()=>{_.value=!0,r.value?x.documentPages.getDocument(r.value).then(n=>g.value=n.children||[]).then(()=>_.value=!1):w.refreshDocumentPages().then(()=>g.value=w.documentPages).then(()=>_.value=!1)};O(()=>{v()});const b=p(!1),i=p(null),j=()=>{var o;let n=(o=i.value)==null?void 0:o.map(f=>f.id);b.value=!0,x.documentPages.deleteDocumentPages(n).then(()=>{v(),i.value=null}).finally(()=>b.value=!1)},C=M(),A=$(()=>T(()=>import("./DocumentPagesUpsertForm-So-XD6y9.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),y=(n={})=>{n.parent_id=r.value,C.open(A,{data:n,onClose:()=>v(),props:{modal:!0}})},V=$(()=>T(()=>import("./BaseDocumentPagesTableChildrenDialog-6z07KPfw.js"),__vite__mapDeps([12,2,3,9,5,13]))),B=n=>{C.open(V,{data:n,onClose:()=>v(),props:{modal:!0}})};return(n,o)=>{var f;return u(),P("div",H,[a("div",J,[_.value?(u(),D(U,{key:0})):((f=g.value)==null?void 0:f.length)>0?(u(),P("div",K,[s(e(z),{class:"mb-4"},{start:l(()=>[a("div",Q,[s(e(m),{label:"Ajouter un document",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:o[0]||(o[0]=t=>y())}),s(e(m),{label:"Supprimer la sélection",icon:"pi pi-trash",class:"p-button-danger",onClick:o[1]||(o[1]=t=>j()),disabled:!i.value||!i.value.length,loading:b.value},null,8,["disabled","loading"])])]),_:1}),s(e(F),{value:g.value,tableStyle:"min-width: 50rem",selection:i.value,"onUpdate:selection":o[2]||(o[2]=t=>i.value=t),sortMode:"single",sortOrder:1},{header:l(()=>[a("div",W,[a("h5",X,S(e(k)?`${e(k)} - contenu`:"Documents"),1)])]),default:l(()=>[s(e(d),{selectionMode:"multiple",headerStyle:"width: 3rem"}),s(e(d),{headerStyle:"width: 160px"},{body:l(({data:t})=>[s(e(m),{class:"p-button-text p-button-rounded",icon:"pi pi-pencil",onClick:E=>y(t)},null,8,["onClick"]),s(e(m),{class:"p-button-text p-button-rounded",icon:"pi pi-book",onClick:E=>B(t)},null,8,["onClick"])]),_:1}),s(e(d),{field:"cover_image_url",headerStyle:"width: 100px"},{body:l(({data:t})=>[t.cover_image_url?(u(),D(e(q),{key:0,class:"contained-image",image:t.cover_image_url,size:"xlarge",shape:"rectangle"},null,8,["image"])):R("",!0)]),_:1}),s(e(d),{field:"title",header:"Titre"}),s(e(d),{field:"summary",header:"Résumé",headerStyle:"width: 500px"},{body:l(({data:t})=>[a("p",Y,S(t.summary),1)]),_:1})]),_:1},8,["value","selection"])])):(u(),P("div",Z,[ee,a("div",te,[s(e(m),{class:"p-button font-bold px-5 py-3 p-button-success p-button-rounded p-button-raised",onClick:o[3]||(o[3]=t=>y())},{default:l(()=>[L("Ajouter")]),_:1})])]))])])}}},oe={__name:"DocumentPagesView",setup(c){return(h,r)=>(u(),D(se))}},ie=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"}));export{ie as D,se as _};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/DocumentPagesUpsertForm-So-XD6y9.js","assets/index.esm-v6cDy30M.js","assets/index-om2yVH6z.js","assets/index-ZWerLMmy.css","assets/message.esm-43B1DmQ7.js","assets/index.esm-BEizDpwn.js","assets/textarea.esm-36WrxFgm.js","assets/editor.esm-z4GqcxJ7.js","assets/AppPicturesSelector-5_4xifco.js","assets/AppTableSkeleton-bFD8jdFV.js","assets/fileupload.esm-5wT2dkji.js","assets/index.esm-Ae9eXaSc.js","assets/BaseDocumentPagesTableChildrenDialog-6z07KPfw.js","assets/avatar.esm-AA-uRh8Z.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
