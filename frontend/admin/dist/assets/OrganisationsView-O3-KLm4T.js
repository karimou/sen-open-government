import{d as w,r as m,A as v,a as k,u as C,c as b,b as a,e as S,f as e,g as t,w as r,o as u,h as A,i as j,_ as T}from"./index-9WfbBEsR.js";import{s as V,a as s,b as P,_ as $}from"./AppTableSkeleton-FqvfmN-I.js";import{s as p}from"./index.esm-7P6y4mBq.js";const B=w("organisations",()=>{const f=m(null);return{organisations:f,refreshOrganisations:async()=>v.organisations.listOrganisations().then(n=>f.value=n)}}),N={class:"grid"},D={class:"col-12"},E={key:1,class:"card"},F={class:"my-2"},I=a("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},[a("h5",{class:"m-0"},"Organisations")],-1),M={key:2,class:"px-4 py-5 shadow-1 flex flex-column md:flex-row md:align-items-center justify-content-between mb-3",style:{width:"600px","background-color":"white"}},U=a("div",null,[a("div",{class:"font-medium text-xl mt-2 mb-3"},"Aucune organisation"),a("div",{class:"font-medium"},"Cliquer sur le bouton suivant pour rajouter une première organisation à la base de données")],-1),L={class:"mt-4 mr-auto md:mt-0 md:mr-0"},q={__name:"OrganisationsView",setup(f){const l=m(!1),n=B();k(()=>{l.value=!0,n.refreshOrganisations().then(()=>l.value=!1)});const o=m(null),_=m(!1),y=()=>{var i;let d=(i=o.value)==null?void 0:i.map(c=>c.id);_.value=!0,v.organisations.deleteOrganisations(d).then(()=>{n.refreshOrganisations(),o.value=null}).finally(()=>_.value=!1)},O=C(),x=j(()=>T(()=>import("./OrganisationsUpsertForm-uj39IIBI.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),g=(d={})=>{O.open(x,{data:d,onClose:n.refreshOrganisations,props:{modal:!0}})};return(d,i)=>{var c;return u(),b("div",N,[a("div",D,[l.value?(u(),S($,{key:0})):((c=e(n).organisations)==null?void 0:c.length)>0?(u(),b("div",E,[t(e(V),{class:"mb-4"},{start:r(()=>[a("div",F,[t(e(p),{label:"Ajouter une organisation",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:g}),t(e(p),{label:"Supprimer la sélection",icon:"pi pi-trash",class:"p-button-danger",onClick:y,disabled:!o.value||!o.value.length,loading:_.value},null,8,["disabled","loading"])])]),_:1}),t(e(P),{value:e(n).organisations,selection:o.value,"onUpdate:selection":i[0]||(i[0]=h=>o.value=h)},{header:r(()=>[I]),default:r(()=>[t(e(s),{selectionMode:"multiple",headerStyle:"width: 3rem"}),t(e(s),{headerStyle:"min-width: 100px"},{body:r(({data:h})=>[t(e(p),{class:"p-button-text p-button-rounded",icon:"pi pi-pencil",onClick:z=>g(h)},null,8,["onClick"])]),_:1}),t(e(s),{field:"name",header:"Nom"}),t(e(s),{field:"type",header:"Type"}),t(e(s),{headerStyle:"min-width: 150px",field:"description",header:"Description"}),t(e(s),{field:"twitter",header:"Twitter"}),t(e(s),{field:"facebook",header:"Facebook"}),t(e(s),{field:"instagram",header:"Instagram"}),t(e(s),{field:"website",header:"Website"}),t(e(s),{field:"address",header:"Adresse"}),t(e(s),{field:"contact_phone",header:"Contact (Téléphone)"}),t(e(s),{field:"contact_email",header:"Contact (email)"}),t(e(s),{field:"parent_organisation_id",header:"Parent"})]),_:1},8,["value","selection"])])):(u(),b("div",M,[U,a("div",L,[t(e(p),{class:"p-button font-bold px-5 py-3 p-button-success p-button-rounded p-button-raised",onClick:g},{default:r(()=>[A("Ajouter")]),_:1})])]))])])}}},H=Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,{value:"Module"}));export{H as O,B as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/OrganisationsUpsertForm-uj39IIBI.js","assets/message.esm-DA8zJJ8T.js","assets/index-9WfbBEsR.js","assets/index-tbN9M-MT.css","assets/index.esm-7P6y4mBq.js","assets/textarea.esm-Zu41E-81.js","assets/radiobutton.esm-CpZ8k0VB.js","assets/AppTableSkeleton-FqvfmN-I.js","assets/inputmask.esm-xDiBA3sz.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
