import{r as h,a as S,u as O,c as v,b as t,e as V,f as e,g as s,w as i,o as p,h as $,A as j,i as x,_ as P}from"./index-9WfbBEsR.js";import{s as E,a as r,b as U,_ as B}from"./AppTableSkeleton-FqvfmN-I.js";import{s as d}from"./index.esm-7P6y4mBq.js";import{u as D}from"./persons-olfuQxH3.js";import{u as F}from"./opinions-RoUOKBJN.js";const N={class:"grid"},I={class:"col-12"},L={key:1,class:"card"},T={class:"my-2"},M=t("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},[t("h5",{class:"m-0"},"Personnes")],-1),R={key:2,class:"px-4 py-5 shadow-1 flex flex-column md:flex-row md:align-items-center justify-content-between mb-3",style:{width:"600px","background-color":"white"}},q=t("div",null,[t("div",{class:"font-medium text-xl mt-2 mb-3"},"Aucune persone"),t("div",{class:"font-medium"},"Cliquer sur le bouton suivant pour rajouter une première personne à la base de données")],-1),z={class:"mt-4 mr-auto md:mt-0 md:mr-0"},X={__name:"PersonsView",setup(G){const m=h(!1),l=D(),g=F();S(()=>{m.value=!0,l.refreshPersons().then(()=>m.value=!1)});const n=h(null),_=h(!1),k=()=>{var a;let o=(a=n.value)==null?void 0:a.map(c=>c.id);_.value=!0,j.persons.deletePersons(o).then(()=>{l.refreshPersons(),n.value=null}).finally(()=>_.value=!1)},b=O(),y=x(()=>P(()=>import("./PersonsUpsertForm-WpaHcSCf.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),f=(o={})=>{b.open(y,{data:o,onClose:l.refreshPersons,props:{modal:!0}})},w=x(()=>P(()=>import("./OpinionsUpsertForm-jVNbQ9RE.js"),__vite__mapDeps([8,1,2,3,4,5,6,9,10,11]))),C=(o={})=>{b.open(w,{data:{author_id:o==null?void 0:o.id},onClose:g.refreshOpinions,props:{modal:!0}})};return(o,a)=>{var c;return p(),v("div",N,[t("div",I,[m.value?(p(),V(B,{key:0})):((c=e(l).persons)==null?void 0:c.length)>0?(p(),v("div",L,[s(e(E),{class:"mb-4"},{start:i(()=>[t("div",T,[s(e(d),{label:"Ajouter une personne",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:f}),s(e(d),{label:"Supprimer la sélection",icon:"pi pi-trash",class:"p-button-danger",onClick:k,disabled:!n.value||!n.value.length,loading:_.value},null,8,["disabled","loading"])])]),_:1}),s(e(U),{value:e(l).persons,selection:n.value,"onUpdate:selection":a[0]||(a[0]=u=>n.value=u)},{header:i(()=>[M]),default:i(()=>[s(e(r),{selectionMode:"multiple",headerStyle:"width: 3rem"}),s(e(r),{headerStyle:"min-width: 100px"},{body:i(({data:u})=>[s(e(d),{class:"p-button-text p-button-rounded",icon:"pi pi-pencil",onClick:A=>f(u)},null,8,["onClick"]),s(e(d),{class:"p-button-text p-button-rounded",icon:"pi pi-megaphone",onClick:A=>C(u)},null,8,["onClick"])]),_:1}),s(e(r),{field:"firstname",header:"Prénom"}),s(e(r),{field:"lastname",header:"Nom"}),s(e(r),{field:"description",header:"Description"})]),_:1},8,["value","selection"])])):(p(),v("div",R,[q,t("div",z,[s(e(d),{class:"p-button font-bold px-5 py-3 p-button-success p-button-rounded p-button-raised",onClick:f},{default:i(()=>[$("Ajouter")]),_:1})])]))])])}}};export{X as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/PersonsUpsertForm-WpaHcSCf.js","assets/message.esm-DA8zJJ8T.js","assets/index-9WfbBEsR.js","assets/index-tbN9M-MT.css","assets/index.esm-7P6y4mBq.js","assets/textarea.esm-Zu41E-81.js","assets/editor.esm-UoywPXbm.js","assets/format-39s6QTMr.js","assets/OpinionsUpsertForm-jVNbQ9RE.js","assets/AppTableSkeleton-FqvfmN-I.js","assets/persons-olfuQxH3.js","assets/issues-zrbi5rwy.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
