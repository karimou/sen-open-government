import{d as I,r as d,A as D,t as O,o as M,u as N,a as m,c as y,b as a,e as T,g as s,w as c,f as e,k as C,h as R,i as S,_ as $}from"./index-jfYll-nw.js";import{_ as L,s as U,a as f,b as F}from"./AppTableSkeleton-fANpGBpA.js";import{s as r}from"./index.esm-vgsyuL-8.js";import"./avatar.esm-rDUAWO8k.js";const q=I("documentpages",()=>{const i=d(null);return{documentPages:i,refreshDocumentPages:async()=>D.documentPages.listDocumentPages().then(l=>i.value=l)}}),z={class:"grid"},G={class:"col-12"},H={key:1,class:"card"},J={class:"my-2"},K={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},Q={class:"m-0"},W={class:"truncate l3"},X={key:2,class:"px-4 py-5 shadow-1 flex flex-column md:flex-row md:align-items-center justify-content-between mb-3",style:{width:"600px","background-color":"white"}},Y=a("div",null,[a("div",{class:"font-medium text-xl mt-2 mb-3"},"Aucun document"),a("div",{class:"font-medium"},"Cliquer sur le bouton suivant pour rajouter une première document à la base de données")],-1),Z={class:"mt-4 mr-auto md:mt-0 md:mr-0"},ee={__name:"BaseDocumentPagesTable",props:{parentId:Number,parentTitle:String},setup(i){const b=i,{parentId:l,parentTitle:x}=O(b),p=d(!1),_=d([]),k=q(),g=()=>{p.value=!0,l.value?D.documentPages.getDocument(l.value).then(o=>_.value=o.children||[]).then(()=>p.value=!1):k.refreshDocumentPages().then(()=>_.value=k.documentPages).then(()=>p.value=!1)};M(()=>{g()});const h=d(!1),u=d(null),A=()=>{var t;let o=(t=u.value)==null?void 0:t.map(v=>v.id);h.value=!0,D.documentPages.deleteDocumentPages(o).then(()=>{g(),u.value=null}).finally(()=>h.value=!1)},w=N(),j=S(()=>$(()=>import("./DocumentPagesUpsertForm-AD4cZMtM.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),P=(o={})=>{o.parent_id=l.value,w.open(j,{data:o,onClose:()=>g(),props:{modal:!0}})},V=S(()=>$(()=>import("./BaseDocumentPagesTableChildrenDialog-1skSFwcs.js"),__vite__mapDeps([12,2,3,9,5,13]))),B=o=>{w.open(V,{data:o,onClose:()=>g(),props:{modal:!0}})};return(o,t)=>{var v;return m(),y("div",z,[a("div",G,[p.value?(m(),T(L,{key:0})):((v=_.value)==null?void 0:v.length)>0?(m(),y("div",H,[s(e(U),{class:"mb-4"},{start:c(()=>[a("div",J,[s(e(r),{label:"Ajouter un document",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:t[0]||(t[0]=n=>P())}),s(e(r),{label:"Supprimer la sélection",icon:"pi pi-trash",class:"p-button-danger",onClick:t[1]||(t[1]=n=>A()),disabled:!u.value||!u.value.length,loading:h.value},null,8,["disabled","loading"])])]),_:1}),s(e(F),{value:_.value,tableStyle:"min-width: 50rem",selection:u.value,"onUpdate:selection":t[2]||(t[2]=n=>u.value=n),sortMode:"single",sortOrder:1},{header:c(()=>[a("div",K,[a("h5",Q,C(e(x)?`${e(x)} - contenu`:"Documents"),1)])]),default:c(()=>[s(e(f),{selectionMode:"multiple",headerStyle:"width: 3rem"}),s(e(f),{headerStyle:"width: 160px"},{body:c(({data:n})=>[s(e(r),{class:"p-button-text p-button-rounded",icon:"pi pi-pencil",onClick:E=>P(n)},null,8,["onClick"]),s(e(r),{class:"p-button-text p-button-rounded",icon:"pi pi-book",onClick:E=>B(n)},null,8,["onClick"])]),_:1}),s(e(f),{field:"title",header:"Titre"}),s(e(f),{field:"summary",header:"Résumé",headerStyle:"width: 500px"},{body:c(({data:n})=>[a("p",W,C(n.summary),1)]),_:1})]),_:1},8,["value","selection"])])):(m(),y("div",X,[Y,a("div",Z,[s(e(r),{class:"p-button font-bold px-5 py-3 p-button-success p-button-rounded p-button-raised",onClick:t[3]||(t[3]=n=>P())},{default:c(()=>[R("Ajouter")]),_:1})])]))])])}}},te={__name:"DocumentPagesView",setup(i){return(b,l)=>(m(),T(ee))}},le=Object.freeze(Object.defineProperty({__proto__:null,default:te},Symbol.toStringTag,{value:"Module"}));export{le as D,ee as _};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/DocumentPagesUpsertForm-AD4cZMtM.js","assets/index.esm-P-gXdjAE.js","assets/index-jfYll-nw.js","assets/index-ZWerLMmy.css","assets/message.esm-er91D30t.js","assets/index.esm-vgsyuL-8.js","assets/textarea.esm-vCzr1SR7.js","assets/editor.esm-y9cAV494.js","assets/AppPicturesSelector-rmKZ8n4L.js","assets/AppTableSkeleton-fANpGBpA.js","assets/fileupload.esm-a_DNqsbQ.js","assets/index.esm-N1Oc4E2N.js","assets/BaseDocumentPagesTableChildrenDialog-1skSFwcs.js","assets/avatar.esm-rDUAWO8k.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
