import{r as f,o as S,u as V,a as u,c as v,b as t,e as g,f as e,g as s,w as n,j as $,h as j,A as E,i as x,_ as y}from"./index-D7X0WbD9.js";import{s as O,a as c,b as T,_ as B}from"./AppTableSkeleton-F_Hh2g5g.js";import{s as d}from"./index.esm-gdRg23pp.js";import{s as D}from"./avatar.esm-DkWrDWgk.js";import{u as N}from"./issues-1Q2RHDve.js";import{u as P}from"./opinions-Wrq0FvtU.js";const L={class:"grid"},U={class:"col-12"},q={key:1,class:"card"},F={class:"my-2"},M=t("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},[t("h5",{class:"m-0"},"Thèmes")],-1),R={key:2,class:"px-4 py-5 shadow-1 flex flex-column md:flex-row md:align-items-center justify-content-between mb-3",style:{width:"600px","background-color":"white"}},z=t("div",null,[t("div",{class:"font-medium text-xl mt-2 mb-3"},"Aucun thème"),t("div",{class:"font-medium"},"Cliquer sur le bouton suivant pour rajouter un premier thème à la base de données")],-1),G={class:"mt-4 mr-auto md:mt-0 md:mr-0"},Z={__name:"IssuesView",setup(H){const a=N();P();const m=f(!1);S(()=>{m.value=!0,a.refreshIssues().then(()=>m.value=!1)});const l=f(null),_=f(!1),k=()=>{var r;let i=(r=l.value)==null?void 0:r.map(p=>p.id);_.value=!0,E.issues.deleteIssues(i).then(()=>{a.refreshIssues(),l.value=null}).finally(()=>_.value=!1)},b=V(),I=x(()=>y(()=>import("./IssuesUpsertForm-37JIdxjv.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),h=(i={})=>{b.open(I,{data:i,onClose:a.refreshIssues,props:{modal:!0}})},w=x(()=>y(()=>import("./IssuesOpinions-qQVrO0Or.js"),__vite__mapDeps([10,11,2,3,12,8,4,13]))),C=(i={})=>{b.open(w,{data:i,props:{modal:!0}})};return(i,r)=>{var p;return u(),v("div",L,[t("div",U,[m.value?(u(),g(B,{key:0})):((p=e(a).issues)==null?void 0:p.length)>0?(u(),v("div",q,[s(e(O),{class:"mb-4"},{start:n(()=>[t("div",F,[s(e(d),{label:"Ajouter un thème politique",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:h}),s(e(d),{label:"Supprimer la sélection",icon:"pi pi-trash",class:"p-button-danger",onClick:k,disabled:!l.value||!l.value.length,loading:_.value},null,8,["disabled","loading"])])]),_:1}),s(e(T),{value:e(a).issues,selection:l.value,"onUpdate:selection":r[0]||(r[0]=o=>l.value=o)},{header:n(()=>[M]),default:n(()=>[s(e(c),{selectionMode:"multiple",headerStyle:"width: 3rem"}),s(e(c),{headerStyle:"width: 120px"},{body:n(({data:o})=>[s(e(d),{class:"p-button-text p-button-rounded",icon:"pi pi-pencil",onClick:A=>h(o)},null,8,["onClick"]),s(e(d),{class:"p-button-text p-button-rounded",icon:"pi pi-megaphone",onClick:A=>C(o)},null,8,["onClick"])]),_:1}),s(e(c),{field:"photo",headerStyle:"width: 100px"},{body:n(({data:o})=>[o.photo?(u(),g(e(D),{key:0,class:"contained-image",image:o.photo,size:"xlarge",shape:"rectangle"},null,8,["image"])):$("",!0)]),_:1}),s(e(c),{field:"title",header:"Titre"}),s(e(c),{field:"short_description",header:"Description"})]),_:1},8,["value","selection"])])):(u(),v("div",R,[z,t("div",G,[s(e(d),{class:"p-button font-bold px-5 py-3 p-button-success p-button-rounded p-button-raised",onClick:h},{default:n(()=>[j("Ajouter")]),_:1})])]))])])}}};export{Z as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/IssuesUpsertForm-37JIdxjv.js","assets/message.esm-R2931qIK.js","assets/index-D7X0WbD9.js","assets/index-D9x--RlZ.css","assets/index.esm-gdRg23pp.js","assets/textarea.esm-DaVE8NbD.js","assets/editor.esm-li_xWJSK.js","assets/AppPicturesSelector-Yyfn3RCI.js","assets/AppTableSkeleton-F_Hh2g5g.js","assets/index.esm-sdiyZ5of.js","assets/IssuesOpinions-qQVrO0Or.js","assets/opinions-Wrq0FvtU.js","assets/BaseOpinionsTable-cNL6cMcG.js","assets/avatar.esm-DkWrDWgk.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
