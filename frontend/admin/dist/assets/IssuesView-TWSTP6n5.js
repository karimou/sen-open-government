import{a as A,r as v,u as S,c as _,b as o,e,f as s,w as a,o as h,g as O,A as V,h as b,_ as x}from"./index-hz0RWW_t.js";import{s as j,a as c,b as E}from"./toolbar.esm--yWOjs_u.js";import{s as r}from"./index.esm-fL_-_ufj.js";import{u as T}from"./issues-t-Z-LgdM.js";import{u as U}from"./opinions-agh5c72w.js";const $={class:"grid"},D={class:"col-12"},F={key:0,class:"card"},P={class:"my-2"},B=o("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},[o("h5",{class:"m-0"},"Thèmes")],-1),N={key:1,class:"px-4 py-5 shadow-1 flex flex-column md:flex-row md:align-items-center justify-content-between mb-3",style:{width:"600px","background-color":"white"}},q=o("div",null,[o("div",{class:"font-medium text-xl mt-2 mb-3"},"Aucun thème"),o("div",{class:"font-medium"},"Cliquer sur le bouton suivant pour rajouter un premier thème à la base de données")],-1),L={class:"mt-4 mr-auto md:mt-0 md:mr-0"},K={__name:"IssuesView",setup(M){const i=T(),g=U();A(i.refreshIssues);const n=v(null),p=v(!1),y=()=>{var l;let t=(l=n.value)==null?void 0:l.map(d=>d.id);p.value=!0,V.issues.deleteIssues(t).then(()=>{i.refreshIssues(),n.value=null}).finally(()=>p.value=!1)},f=S(),I=b(()=>x(()=>import("./IssuesUpsertForm-q5ePJC9c.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),m=(t={})=>{f.open(I,{data:t,onClose:i.refreshIssues,props:{modal:!0}})},k=b(()=>x(()=>import("./OpinionsUpsertForm-niuixhiL.js"),__vite__mapDeps([7,1,2,3,4,5,6,8,9,10]))),w=(t={})=>{f.open(k,{data:{issue_id:t==null?void 0:t.id},onClose:g.refreshOpinions,props:{modal:!0}})};return(t,l)=>{var d;return h(),_("div",$,[o("div",D,[((d=e(i).issues)==null?void 0:d.length)>0?(h(),_("div",F,[s(e(j),{class:"mb-4"},{start:a(()=>[o("div",P,[s(e(r),{label:"Ajouter un thème politique",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:m}),s(e(r),{label:"Supprimer la sélection",icon:"pi pi-trash",class:"p-button-danger",onClick:y,disabled:!n.value||!n.value.length,loading:p.value},null,8,["disabled","loading"])])]),_:1}),s(e(E),{value:e(i).issues,selection:n.value,"onUpdate:selection":l[0]||(l[0]=u=>n.value=u)},{header:a(()=>[B]),default:a(()=>[s(e(c),{selectionMode:"multiple",headerStyle:"width: 3rem"}),s(e(c),{headerStyle:"min-width: 100px"},{body:a(({data:u})=>[s(e(r),{class:"p-button-text p-button-rounded",icon:"pi pi-pencil",onClick:C=>m(u)},null,8,["onClick"]),s(e(r),{class:"p-button-text p-button-rounded",icon:"pi pi-megaphone",onClick:C=>w(u)},null,8,["onClick"])]),_:1}),s(e(c),{field:"title",header:"Titre"}),s(e(c),{field:"short_description",header:"Description"})]),_:1},8,["value","selection"])])):(h(),_("div",N,[q,o("div",L,[s(e(r),{class:"p-button font-bold px-5 py-3 p-button-success p-button-rounded p-button-raised",onClick:m},{default:a(()=>[O("Ajouter")]),_:1})])]))])])}}};export{K as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/IssuesUpsertForm-q5ePJC9c.js","assets/message.esm-TrzrTVKT.js","assets/index-hz0RWW_t.js","assets/index-tbN9M-MT.css","assets/index.esm-fL_-_ufj.js","assets/textarea.esm-mUQgP30i.js","assets/editor.esm-C-9kZb3f.js","assets/OpinionsUpsertForm-niuixhiL.js","assets/toolbar.esm--yWOjs_u.js","assets/persons-XZQ-Wm6p.js","assets/issues-t-Z-LgdM.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
