import{B as Le,D as Ae,m as J,q as Fe,a as T,c as B,b as U,F as Se,p as Pe,k as G,e as ve,G as $e,j as fe,r as ue,w as re,f as q,g as te,h as Me,n as Ke,o as ze,t as qe,$ as He,A as We,Y as Ve}from"./index-om2yVH6z.js";import{a as Ie,b as Qe,c as Je}from"./AppTableSkeleton-bFD8jdFV.js";import{s as Ge}from"./fileupload.esm-5wT2dkji.js";import{s as we,d as Ye}from"./index.esm-BEizDpwn.js";import{c as Ze,g as Xe,s as et}from"./message.esm-43B1DmQ7.js";import{u as tt}from"./issues-Palcc7_Z.js";import{u as nt}from"./persons-Q5GhyaGj.js";var it=`
@layer primevue {
    .p-steps {
        position: relative;
    }

    .p-steps .p-steps-list {
        padding: 0;
        margin: 0;
        list-style-type: none;
        display: flex;
    }

    .p-steps-item {
        position: relative;
        display: flex;
        justify-content: center;
        flex: 1 1 auto;
        overflow: hidden;
    }

    .p-steps-item .p-menuitem-link {
        display: inline-flex;
        flex-direction: column;
        align-items: center;
        overflow: hidden;
        text-decoration: none;
        cursor: pointer;
    }

    .p-steps.p-steps-readonly .p-steps-item {
        cursor: auto;
    }

    .p-steps-item.p-steps-current .p-menuitem-link {
        cursor: default;
    }

    .p-steps-title {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 100%;
    }

    .p-steps-number {
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .p-steps-title {
        display: block;
    }
}
`,rt={root:function(n){var r=n.props;return["p-steps p-component",{"p-readonly":r.readonly}]},menu:"p-steps-list",menuitem:function(n){var r=n.instance,f=n.item,I=n.index;return["p-steps-item",{"p-highlight p-steps-current":r.isActive(I),"p-disabled":r.isItemDisabled(f,I)}]},action:"p-menuitem-link",step:"p-steps-number",label:"p-steps-title"},st=Le.extend({name:"steps",css:it,classes:rt}),at={name:"BaseSteps",extends:Fe,props:{id:{type:String},model:{type:Array,default:null},readonly:{type:Boolean,default:!0},activeStep:{type:Number,default:0}},style:st,provide:function(){return{$parentInstance:this}}},Ne={name:"Steps",extends:at,emits:["update:activeStep","step-change"],data:function(){return{d_activeStep:this.activeStep}},watch:{activeStep:function(n){this.d_activeStep=n}},mounted:function(){var n=this.findFirstItem();n&&(n.tabIndex="0")},methods:{getPTOptions:function(n,r,f){return this.ptm(n,{context:{item:r,index:f,active:this.isActive(f),disabled:this.isItemDisabled(r,f)}})},onItemClick:function(n,r,f){if(this.disabled(r)||this.readonly){n.preventDefault();return}r.command&&r.command({originalEvent:n,item:r}),f!==this.d_activeStep&&(this.d_activeStep=f,this.$emit("update:activeStep",this.d_activeStep)),this.$emit("step-change",{originalEvent:n,index:f})},onItemKeydown:function(n,r){switch(n.code){case"ArrowRight":{this.navigateToNextItem(n.target),n.preventDefault();break}case"ArrowLeft":{this.navigateToPrevItem(n.target),n.preventDefault();break}case"Home":{this.navigateToFirstItem(n.target),n.preventDefault();break}case"End":{this.navigateToLastItem(n.target),n.preventDefault();break}case"Tab":break;case"Enter":case"NumpadEnter":case"Space":{this.onItemClick(n,r),n.preventDefault();break}}},navigateToNextItem:function(n){var r=this.findNextItem(n);r&&this.setFocusToMenuitem(n,r)},navigateToPrevItem:function(n){var r=this.findPrevItem(n);r&&this.setFocusToMenuitem(n,r)},navigateToFirstItem:function(n){var r=this.findFirstItem(n);r&&this.setFocusToMenuitem(n,r)},navigateToLastItem:function(n){var r=this.findLastItem(n);r&&this.setFocusToMenuitem(n,r)},findNextItem:function(n){var r=n.parentElement.nextElementSibling;return r?r.children[0]:null},findPrevItem:function(n){var r=n.parentElement.previousElementSibling;return r?r.children[0]:null},findFirstItem:function(){var n=Ae.findSingle(this.$refs.list,'[data-pc-section="menuitem"]');return n?n.children[0]:null},findLastItem:function(){var n=Ae.find(this.$refs.list,'[data-pc-section="menuitem"]');return n?n[n.length-1].children[0]:null},setFocusToMenuitem:function(n,r){n.tabIndex="-1",r.tabIndex="0",r.focus()},isActive:function(n){return n===this.d_activeStep},isItemDisabled:function(n,r){return this.disabled(n)||this.readonly&&!this.isActive(r)},visible:function(n){return typeof n.visible=="function"?n.visible():n.visible!==!1},disabled:function(n){return typeof n.disabled=="function"?n.disabled():n.disabled},label:function(n){return typeof n.label=="function"?n.label():n.label},getMenuItemProps:function(n,r){var f=this;return{action:J({class:this.cx("action"),onClick:function(g){return f.onItemClick(g,n)},onKeyDown:function(g){return f.onItemKeydown(g,n)}},this.getPTOptions("action",n,r)),step:J({class:this.cx("step")},this.getPTOptions("step",n,r)),label:J({class:this.cx("label")},this.getPTOptions("label",n,r))}}}},ot=["id"],lt=["aria-current","onClick","onKeydown","data-p-highlight","data-p-disabled"];function ut(a,n,r,f,I,g){return T(),B("nav",J({id:a.id,class:a.cx("root")},a.ptm("root"),{"data-pc-name":"steps"}),[U("ol",J({ref:"list",class:a.cx("menu")},a.ptm("menu")),[(T(!0),B(Se,null,Pe(a.model,function(k,C){return T(),B(Se,{key:g.label(k)+"_"+C.toString()},[g.visible(k)?(T(),B("li",J({key:0,class:[a.cx("menuitem",{item:k,index:C}),k.class],style:k.style,"aria-current":g.isActive(C)?"step":void 0,onClick:function(y){return g.onItemClick(y,k,C)},onKeydown:function(y){return g.onItemKeydown(y,k,C)}},g.getPTOptions("menuitem",k,C),{"data-p-highlight":g.isActive(C),"data-p-disabled":g.isItemDisabled(k,C)}),[a.$slots.item?(T(),ve($e(a.$slots.item),{key:1,item:k,index:C,active:C===I.d_activeStep,label:g.label(k),props:g.getMenuItemProps(k,C)},null,8,["item","index","active","label","props"])):(T(),B("span",J({key:0,class:a.cx("action")},g.getPTOptions("action",k,C)),[U("span",J({class:a.cx("step")},g.getPTOptions("step",k,C)),G(C+1),17),U("span",J({class:a.cx("label")},g.getPTOptions("label",k,C)),G(g.label(k)),17)],16))],16,lt)):fe("",!0)],64)}),128))],16)],16,ot)}Ne.render=ut;var Ue={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(a,n){(function(r,f){a.exports=f()})(Ze,function r(){var f=typeof self<"u"?self:typeof window<"u"?window:f!==void 0?f:{},I=!f.document&&!!f.postMessage,g=f.IS_PAPA_WORKER||!1,k={},C=0,c={parse:function(t,e){var i=(e=e||{}).dynamicTyping||!1;if(E(i)&&(e.dynamicTypingFunction=i,i={}),e.dynamicTyping=i,e.transform=!!E(e.transform)&&e.transform,e.worker&&c.WORKERS_SUPPORTED){var s=function(){if(!c.WORKERS_SUPPORTED)return!1;var h=(j=f.URL||f.webkitURL||null,A=r.toString(),c.BLOB_URL||(c.BLOB_URL=j.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",A,")();"],{type:"text/javascript"})))),_=new f.Worker(h),j,A;return _.onmessage=je,_.id=C++,k[_.id]=_}();return s.userStep=e.step,s.userChunk=e.chunk,s.userComplete=e.complete,s.userError=e.error,e.step=E(e.step),e.chunk=E(e.chunk),e.complete=E(e.complete),e.error=E(e.error),delete e.worker,void s.postMessage({input:t,config:e,workerId:s.id})}var l=null;return c.NODE_STREAM_INPUT,typeof t=="string"?(t=function(h){return h.charCodeAt(0)===65279?h.slice(1):h}(t),l=e.download?new v(e):new ae(e)):t.readable===!0&&E(t.read)&&E(t.on)?l=new ye(e):(f.File&&t instanceof File||t instanceof Object)&&(l=new Q(e)),l.stream(t)},unparse:function(t,e){var i=!1,s=!0,l=",",h=`\r
`,_='"',j=_+_,A=!1,u=null,F=!1;(function(){if(typeof e=="object"){if(typeof e.delimiter!="string"||c.BAD_DELIMITERS.filter(function(o){return e.delimiter.indexOf(o)!==-1}).length||(l=e.delimiter),(typeof e.quotes=="boolean"||typeof e.quotes=="function"||Array.isArray(e.quotes))&&(i=e.quotes),typeof e.skipEmptyLines!="boolean"&&typeof e.skipEmptyLines!="string"||(A=e.skipEmptyLines),typeof e.newline=="string"&&(h=e.newline),typeof e.quoteChar=="string"&&(_=e.quoteChar),typeof e.header=="boolean"&&(s=e.header),Array.isArray(e.columns)){if(e.columns.length===0)throw new Error("Option columns is empty");u=e.columns}e.escapeChar!==void 0&&(j=e.escapeChar+_),(typeof e.escapeFormulae=="boolean"||e.escapeFormulae instanceof RegExp)&&(F=e.escapeFormulae instanceof RegExp?e.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var p=new RegExp(be(_),"g");if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return ne(null,t,A);if(typeof t[0]=="object")return ne(u||Object.keys(t[0]),t,A)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||u),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),ne(t.fields||[],t.data||[],A);throw new Error("Unable to serialize unrecognized input");function ne(o,O,W){var L="";typeof o=="string"&&(o=JSON.parse(o)),typeof O=="string"&&(O=JSON.parse(O));var K=Array.isArray(o)&&0<o.length,z=!Array.isArray(O[0]);if(K&&s){for(var N=0;N<o.length;N++)0<N&&(L+=l),L+=H(o[N],N);0<O.length&&(L+=h)}for(var d=0;d<O.length;d++){var b=K?o.length:O[d].length,R=!1,M=K?Object.keys(O[d]).length===0:O[d].length===0;if(W&&!K&&(R=W==="greedy"?O[d].join("").trim()==="":O[d].length===1&&O[d][0].length===0),W==="greedy"&&K){for(var x=[],V=0;V<b;V++){var P=z?o[V]:V;x.push(O[d][P])}R=x.join("").trim()===""}if(!R){for(var S=0;S<b;S++){0<S&&!M&&(L+=l);var ie=K&&z?o[S]:S;L+=H(O[d][ie],S)}d<O.length-1&&(!W||0<b&&!M)&&(L+=h)}}return L}function H(o,O){if(o==null)return"";if(o.constructor===Date)return JSON.stringify(o).slice(1,25);var W=!1;F&&typeof o=="string"&&F.test(o)&&(o="'"+o,W=!0);var L=o.toString().replace(p,j);return(W=W||i===!0||typeof i=="function"&&i(o,O)||Array.isArray(i)&&i[O]||function(K,z){for(var N=0;N<z.length;N++)if(-1<K.indexOf(z[N]))return!0;return!1}(L,c.BAD_DELIMITERS)||-1<L.indexOf(l)||L.charAt(0)===" "||L.charAt(L.length-1)===" ")?_+L+_:L}}};if(c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!I&&!!f.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=Ce,c.ParserHandle=Te,c.NetworkStreamer=v,c.FileStreamer=Q,c.StringStreamer=ae,c.ReadableStreamStreamer=ye,f.jQuery){var y=f.jQuery;y.fn.parse=function(t){var e=t.config||{},i=[];return this.each(function(h){if(!(y(this).prop("tagName").toUpperCase()==="INPUT"&&y(this).attr("type").toLowerCase()==="file"&&f.FileReader)||!this.files||this.files.length===0)return!0;for(var _=0;_<this.files.length;_++)i.push({file:this.files[_],inputElem:this,instanceConfig:y.extend({},e)})}),s(),this;function s(){if(i.length!==0){var h,_,j,A,u=i[0];if(E(t.before)){var F=t.before(u.file,u.inputElem);if(typeof F=="object"){if(F.action==="abort")return h="AbortError",_=u.file,j=u.inputElem,A=F.reason,void(E(t.error)&&t.error({name:h},_,j,A));if(F.action==="skip")return void l();typeof F.config=="object"&&(u.instanceConfig=y.extend(u.instanceConfig,F.config))}else if(F==="skip")return void l()}var p=u.instanceConfig.complete;u.instanceConfig.complete=function(ne){E(p)&&p(ne,u.file,u.inputElem),l()},c.parse(u.file,u.instanceConfig)}else E(t.complete)&&t.complete()}function l(){i.splice(0,1),s()}}}function m(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(e){var i=Ee(e);i.chunkSize=parseInt(i.chunkSize),e.step||e.chunk||(i.chunkSize=null),this._handle=new Te(i),(this._handle.streamer=this)._config=i}).call(this,t),this.parseChunk=function(e,i){if(this.isFirstChunk&&E(this._config.beforeFirstChunk)){var s=this._config.beforeFirstChunk(e);s!==void 0&&(e=s)}this.isFirstChunk=!1,this._halted=!1;var l=this._partialLine+e;this._partialLine="";var h=this._handle.parse(l,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var _=h.meta.cursor;this._finished||(this._partialLine=l.substring(_-this._baseIndex),this._baseIndex=_),h&&h.data&&(this._rowCount+=h.data.length);var j=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(g)f.postMessage({results:h,workerId:c.WORKER_ID,finished:j});else if(E(this._config.chunk)&&!i){if(this._config.chunk(h,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);h=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(h.data),this._completeResults.errors=this._completeResults.errors.concat(h.errors),this._completeResults.meta=h.meta),this._completed||!j||!E(this._config.complete)||h&&h.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),j||h&&h.meta.paused||this._nextChunk(),h}this._halted=!0},this._sendError=function(e){E(this._config.error)?this._config.error(e):g&&this._config.error&&f.postMessage({workerId:c.WORKER_ID,error:e,finished:!1})}}function v(t){var e;(t=t||{}).chunkSize||(t.chunkSize=c.RemoteChunkSize),m.call(this,t),this._nextChunk=I?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(i){this._input=i,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),I||(e.onload=ce(this._chunkLoaded,this),e.onerror=ce(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!I),this._config.downloadRequestHeaders){var i=this._config.downloadRequestHeaders;for(var s in i)e.setRequestHeader(s,i[s])}if(this._config.chunkSize){var l=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+l)}try{e.send(this._config.downloadRequestBody)}catch(h){this._chunkError(h.message)}I&&e.status===0&&this._chunkError()}},this._chunkLoaded=function(){e.readyState===4&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(i){var s=i.getResponseHeader("Content-Range");return s===null?-1:parseInt(s.substring(s.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(i){var s=e.statusText||i;this._sendError(new Error(s))}}function Q(t){var e,i;(t=t||{}).chunkSize||(t.chunkSize=c.LocalChunkSize),m.call(this,t);var s=typeof FileReader<"u";this.stream=function(l){this._input=l,i=l.slice||l.webkitSlice||l.mozSlice,s?((e=new FileReader).onload=ce(this._chunkLoaded,this),e.onerror=ce(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var l=this._input;if(this._config.chunkSize){var h=Math.min(this._start+this._config.chunkSize,this._input.size);l=i.call(l,this._start,h)}var _=e.readAsText(l,this._config.encoding);s||this._chunkLoaded({target:{result:_}})},this._chunkLoaded=function(l){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(l.target.result)},this._chunkError=function(){this._sendError(e.error)}}function ae(t){var e;m.call(this,t=t||{}),this.stream=function(i){return e=i,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var i,s=this._config.chunkSize;return s?(i=e.substring(0,s),e=e.substring(s)):(i=e,e=""),this._finished=!e,this.parseChunk(i)}}}function ye(t){m.call(this,t=t||{});var e=[],i=!0,s=!1;this.pause=function(){m.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){m.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(l){this._input=l,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){s&&e.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):i=!0},this._streamData=ce(function(l){try{e.push(typeof l=="string"?l:l.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(h){this._streamError(h)}},this),this._streamError=ce(function(l){this._streamCleanUp(),this._sendError(l)},this),this._streamEnd=ce(function(){this._streamCleanUp(),s=!0,this._streamData("")},this),this._streamCleanUp=ce(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function Te(t){var e,i,s,l=Math.pow(2,53),h=-l,_=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,j=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,A=this,u=0,F=0,p=!1,ne=!1,H=[],o={data:[],errors:[],meta:{}};if(E(t.step)){var O=t.step;t.step=function(d){if(o=d,K())L();else{if(L(),o.data.length===0)return;u+=d.data.length,t.preview&&u>t.preview?i.abort():(o.data=o.data[0],O(o,A))}}}function W(d){return t.skipEmptyLines==="greedy"?d.join("").trim()==="":d.length===1&&d[0].length===0}function L(){return o&&s&&(N("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),s=!1),t.skipEmptyLines&&(o.data=o.data.filter(function(d){return!W(d)})),K()&&function(){if(!o)return;function d(R,M){E(t.transformHeader)&&(R=t.transformHeader(R,M)),H.push(R)}if(Array.isArray(o.data[0])){for(var b=0;K()&&b<o.data.length;b++)o.data[b].forEach(d);o.data.splice(0,1)}else o.data.forEach(d)}(),function(){if(!o||!t.header&&!t.dynamicTyping&&!t.transform)return o;function d(R,M){var x,V=t.header?{}:[];for(x=0;x<R.length;x++){var P=x,S=R[x];t.header&&(P=x>=H.length?"__parsed_extra":H[x]),t.transform&&(S=t.transform(S,P)),S=z(P,S),P==="__parsed_extra"?(V[P]=V[P]||[],V[P].push(S)):V[P]=S}return t.header&&(x>H.length?N("FieldMismatch","TooManyFields","Too many fields: expected "+H.length+" fields but parsed "+x,F+M):x<H.length&&N("FieldMismatch","TooFewFields","Too few fields: expected "+H.length+" fields but parsed "+x,F+M)),V}var b=1;return!o.data.length||Array.isArray(o.data[0])?(o.data=o.data.map(d),b=o.data.length):o.data=d(o.data,0),t.header&&o.meta&&(o.meta.fields=H),F+=b,o}()}function K(){return t.header&&H.length===0}function z(d,b){return R=d,t.dynamicTypingFunction&&t.dynamicTyping[R]===void 0&&(t.dynamicTyping[R]=t.dynamicTypingFunction(R)),(t.dynamicTyping[R]||t.dynamicTyping)===!0?b==="true"||b==="TRUE"||b!=="false"&&b!=="FALSE"&&(function(M){if(_.test(M)){var x=parseFloat(M);if(h<x&&x<l)return!0}return!1}(b)?parseFloat(b):j.test(b)?new Date(b):b===""?null:b):b;var R}function N(d,b,R,M){var x={type:d,code:b,message:R};M!==void 0&&(x.row=M),o.errors.push(x)}this.parse=function(d,b,R){var M=t.quoteChar||'"';if(t.newline||(t.newline=function(P,S){P=P.substring(0,1048576);var ie=new RegExp(be(S)+"([^]*?)"+be(S),"gm"),Y=(P=P.replace(ie,"")).split("\r"),se=P.split(`
`),oe=1<se.length&&se[0].length<Y[0].length;if(Y.length===1||oe)return`
`;for(var Z=0,D=0;D<Y.length;D++)Y[D][0]===`
`&&Z++;return Z>=Y.length/2?`\r
`:"\r"}(d,M)),s=!1,t.delimiter)E(t.delimiter)&&(t.delimiter=t.delimiter(d),o.meta.delimiter=t.delimiter);else{var x=function(P,S,ie,Y,se){var oe,Z,D,$;se=se||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var me=0;me<se.length;me++){var w=se[me],_e=0,le=0,ge=0;D=void 0;for(var de=new Ce({comments:Y,delimiter:w,newline:S,preview:10}).parse(P),pe=0;pe<de.data.length;pe++)if(ie&&W(de.data[pe]))ge++;else{var he=de.data[pe].length;le+=he,D!==void 0?0<he&&(_e+=Math.abs(he-D),D=he):D=he}0<de.data.length&&(le/=de.data.length-ge),(Z===void 0||_e<=Z)&&($===void 0||$<le)&&1.99<le&&(Z=_e,oe=w,$=le)}return{successful:!!(t.delimiter=oe),bestDelimiter:oe}}(d,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);x.successful?t.delimiter=x.bestDelimiter:(s=!0,t.delimiter=c.DefaultDelimiter),o.meta.delimiter=t.delimiter}var V=Ee(t);return t.preview&&t.header&&V.preview++,e=d,i=new Ce(V),o=i.parse(e,b,R),L(),p?{meta:{paused:!0}}:o||{meta:{paused:!1}}},this.paused=function(){return p},this.pause=function(){p=!0,i.abort(),e=E(t.chunk)?"":e.substring(i.getCharIndex())},this.resume=function(){A.streamer._halted?(p=!1,A.streamer.parseChunk(e,!0)):setTimeout(A.resume,3)},this.aborted=function(){return ne},this.abort=function(){ne=!0,i.abort(),o.meta.aborted=!0,E(t.complete)&&t.complete(o),e=""}}function be(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ce(t){var e,i=(t=t||{}).delimiter,s=t.newline,l=t.comments,h=t.step,_=t.preview,j=t.fastMode,A=e=t.quoteChar===void 0||t.quoteChar===null?'"':t.quoteChar;if(t.escapeChar!==void 0&&(A=t.escapeChar),(typeof i!="string"||-1<c.BAD_DELIMITERS.indexOf(i))&&(i=","),l===i)throw new Error("Comment character same as delimiter");l===!0?l="#":(typeof l!="string"||-1<c.BAD_DELIMITERS.indexOf(l))&&(l=!1),s!==`
`&&s!=="\r"&&s!==`\r
`&&(s=`
`);var u=0,F=!1;this.parse=function(p,ne,H){if(typeof p!="string")throw new Error("Input must be a string");var o=p.length,O=i.length,W=s.length,L=l.length,K=E(h),z=[],N=[],d=[],b=u=0;if(!p)return X();if(t.header&&!ne){var R=p.split(s)[0].split(i),M=[],x={},V=!1;for(var P in R){var S=R[P];E(t.transformHeader)&&(S=t.transformHeader(S,P));var ie=S,Y=x[S]||0;for(0<Y&&(V=!0,ie=S+"_"+Y),x[S]=Y+1;M.includes(ie);)ie=ie+"_"+Y;M.push(ie)}if(V){var se=p.split(s);se[0]=M.join(i),p=se.join(s)}}if(j||j!==!1&&p.indexOf(e)===-1){for(var oe=p.split(s),Z=0;Z<oe.length;Z++){if(d=oe[Z],u+=d.length,Z!==oe.length-1)u+=s.length;else if(H)return X();if(!l||d.substring(0,L)!==l){if(K){if(z=[],ge(d.split(i)),ke(),F)return X()}else ge(d.split(i));if(_&&_<=Z)return z=z.slice(0,_),X(!0)}}return X()}for(var D=p.indexOf(i,u),$=p.indexOf(s,u),me=new RegExp(be(A)+be(e),"g"),w=p.indexOf(e,u);;)if(p[u]!==e)if(l&&d.length===0&&p.substring(u,u+L)===l){if($===-1)return X();u=$+W,$=p.indexOf(s,u),D=p.indexOf(i,u)}else if(D!==-1&&(D<$||$===-1))d.push(p.substring(u,D)),u=D+O,D=p.indexOf(i,u);else{if($===-1)break;if(d.push(p.substring(u,$)),he($+W),K&&(ke(),F))return X();if(_&&z.length>=_)return X(!0)}else for(w=u,u++;;){if((w=p.indexOf(e,w+1))===-1)return H||N.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:z.length,index:u}),pe();if(w===o-1)return pe(p.substring(u,w).replace(me,e));if(e!==A||p[w+1]!==A){if(e===A||w===0||p[w-1]!==A){D!==-1&&D<w+1&&(D=p.indexOf(i,w+1)),$!==-1&&$<w+1&&($=p.indexOf(s,w+1));var _e=de($===-1?D:Math.min(D,$));if(p.substr(w+1+_e,O)===i){d.push(p.substring(u,w).replace(me,e)),p[u=w+1+_e+O]!==e&&(w=p.indexOf(e,u)),D=p.indexOf(i,u),$=p.indexOf(s,u);break}var le=de($);if(p.substring(w+1+le,w+1+le+W)===s){if(d.push(p.substring(u,w).replace(me,e)),he(w+1+le+W),D=p.indexOf(i,u),w=p.indexOf(e,u),K&&(ke(),F))return X();if(_&&z.length>=_)return X(!0);break}N.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:z.length,index:u}),w++}}else w++}return pe();function ge(ee){z.push(ee),b=u}function de(ee){var De=0;if(ee!==-1){var xe=p.substring(w+1,ee);xe&&xe.trim()===""&&(De=xe.length)}return De}function pe(ee){return H||(ee===void 0&&(ee=p.substring(u)),d.push(ee),u=o,ge(d),K&&ke()),X()}function he(ee){u=ee,ge(d),d=[],$=p.indexOf(s,u)}function X(ee){return{data:z,errors:N,meta:{delimiter:i,linebreak:s,aborted:F,truncated:!!ee,cursor:b+(ne||0)}}}function ke(){h(X()),z=[],N=[]}},this.abort=function(){F=!0},this.getCharIndex=function(){return u}}function je(t){var e=t.data,i=k[e.workerId],s=!1;if(e.error)i.userError(e.error,e.file);else if(e.results&&e.results.data){var l={abort:function(){s=!0,Oe(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Re,resume:Re};if(E(i.userStep)){for(var h=0;h<e.results.data.length&&(i.userStep({data:e.results.data[h],errors:e.results.errors,meta:e.results.meta},l),!s);h++);delete e.results}else E(i.userChunk)&&(i.userChunk(e.results,l,e.file),delete e.results)}e.finished&&!s&&Oe(e.workerId,e.results)}function Oe(t,e){var i=k[t];E(i.userComplete)&&i.userComplete(e),i.terminate(),delete k[t]}function Re(){throw new Error("Not implemented.")}function Ee(t){if(typeof t!="object"||t===null)return t;var e=Array.isArray(t)?[]:{};for(var i in t)e[i]=Ee(t[i]);return e}function ce(t,e){return function(){t.apply(e,arguments)}}function E(t){return typeof t=="function"}return g&&(f.onmessage=function(t){var e=t.data;if(c.WORKER_ID===void 0&&e&&(c.WORKER_ID=e.workerId),typeof e.input=="string")f.postMessage({workerId:c.WORKER_ID,results:c.parse(e.input,e.config),finished:!0});else if(f.File&&e.input instanceof File||e.input instanceof Object){var i=c.parse(e.input,e.config);i&&f.postMessage({workerId:c.WORKER_ID,results:i,finished:!0})}}),(v.prototype=Object.create(m.prototype)).constructor=v,(Q.prototype=Object.create(m.prototype)).constructor=Q,(ae.prototype=Object.create(ae.prototype)).constructor=ae,(ye.prototype=Object.create(m.prototype)).constructor=ye,c})})(Ue);var ct=Ue.exports;const dt=Xe(ct),pt={class:"flex flex-wrap justify-content-between align-items-center flex-1 gap-2"},ht={class:"flex gap-2"},ft={key:0},mt=U("h5",null,"Pending",-1),gt={class:"flex flex-wrap p-0 sm:p-5 gap-5"},vt=["alt","src"],_t={class:"font-semibold"},yt={class:"flex align-items-center justify-content-center flex-column"},bt=U("i",{class:"pi pi-cloud-upload border-2 border-circle p-5 text-8xl text-400 border-400"},null,-1),kt={class:"mt-4 mb-0"},It={__name:"AppOpinionsCsvImportStepFileParsing",emits:["start","complete"],setup(a,{emit:n}){const r=n,f=ue(["Thème","Opinion"]),I=ue(null),g=ue([]),k=({files:c})=>{g.value=[],r("start"),c.forEach(y=>dt.parse(y,{header:!0,complete:(m,v)=>{g.value=g.value.concat((m==null?void 0:m.data)||[]),r("complete",g.value)},error:(m,v)=>{I.value=m}}))},C=c=>c;return(c,y)=>(T(),ve(q(Ge),{name:"file",accept:"text/csv",maxFileSize:1e6,onSelect:k},{header:re(({chooseCallback:m,clearCallback:v,files:Q})=>[U("div",pt,[U("div",ht,[te(q(we),{onClick:ae=>m(),icon:"pi pi-images",rounded:"",outlined:""},null,8,["onClick"]),te(q(we),{onClick:ae=>v(),icon:"pi pi-times",rounded:"",outlined:"",severity:"danger",disabled:!Q||Q.length===0},null,8,["onClick","disabled"])])])]),content:re(({files:m,removeFileCallback:v})=>[m.length>0?(T(),B("div",ft,[mt,U("div",gt,[(T(!0),B(Se,null,Pe(m,(Q,ae)=>(T(),B("div",{key:Q.name+Q.type+Q.size,class:"card m-0 px-6 flex flex-column border-1 surface-border align-items-center gap-3"},[U("div",null,[U("img",{role:"presentation",alt:Q.name,src:Q.objectURL,width:"100",height:"50"},null,8,vt)]),U("span",_t,G(Q.name),1),U("div",null,G(C(Q.size)),1),te(q(Ye),{value:"Pending",severity:"warning"}),te(q(we),{icon:"pi pi-times",onClick:ye=>v(ae),outlined:"",rounded:"",severity:"danger"},null,8,["onClick"])]))),128))])])):fe("",!0),I.value?(T(),ve(q(et),{key:1,severity:"error"},{default:re(()=>[Me(G(I.value),1)]),_:1})):fe("",!0)]),empty:re(()=>[U("div",yt,[bt,U("p",kt," Déposez vos fichiers CSV contenant les opinions à charger ići.. Un fichier CSV avec les colonnes suivantes est attendu: "+G(f.value.join(", "))+".. ",1)])]),_:1}))}};var wt=`
@layer primevue {
    .p-tag {
        display: inline-flex;
        align-items: center;
        justify-content: center;
    }

    .p-tag-icon,
    .p-tag-value,
    .p-tag-icon.pi {
        line-height: 1.5;
    }

    .p-tag.p-tag-rounded {
        border-radius: 10rem;
    }
}
`,Ct={root:function(n){var r=n.props;return["p-tag p-component",{"p-tag-info":r.severity==="info","p-tag-success":r.severity==="success","p-tag-warning":r.severity==="warning","p-tag-danger":r.severity==="danger","p-tag-rounded":r.rounded}]},icon:"p-tag-icon",value:"p-tag-value"},Et=Le.extend({name:"tag",css:wt,classes:Ct}),xt={name:"BaseTag",extends:Fe,props:{value:null,severity:null,rounded:Boolean,icon:String},style:Et,provide:function(){return{$parentInstance:this}}},Be={name:"Tag",extends:xt};function St(a,n,r,f,I,g){return T(),B("span",J({class:a.cx("root")},a.ptm("root"),{"data-pc-name":"tag"}),[a.$slots.icon?(T(),ve($e(a.$slots.icon),J({key:0,class:a.cx("icon")},a.ptm("icon")),null,16,["class"])):a.icon?(T(),B("span",J({key:1,class:[a.cx("icon"),a.icon]},a.ptm("icon")),null,16)):fe("",!0),Ke(a.$slots,"default",{},function(){return[U("span",J({class:a.cx("value")},a.ptm("value")),G(a.value),17)]})],16)}Be.render=St;const Tt={class:"flex flex-wrap justify-content-end"},Ot={key:0,class:"pi pi-spin pi-spinner"},Rt={key:1,class:"pi pi-check",style:{color:"green"}},Dt={__name:"AppOpinionsCsvImportStepDataUpload",props:{parsedLines:{type:Array,default:[]},authorId:{type:Number}},setup(a){const n=tt(),r=ue({}),f=ue({});ze(async()=>{n.issues||await n.refreshIssues()});const I=a,{parsedLines:g,authorId:k}=qe(I),C=He(()=>g.value.map(y=>{let m=n.issuesByTitle[y.Thème];return{issue_id:m==null?void 0:m.id,issue:y.Thème,author_id:k.value,summary:y.Opinion,uploaded:!1,uploading:!1}})),c=async()=>{for(let y=0;y<C.value.length;y++){let m=C.value[y];m.issue_id&&m.author_id&&(r.value[y]=!0,await We.opinions.addOpinion(m).then(v=>{r.value[y]=!1,f.value[y]=!0}))}};return(y,m)=>C.value.length>0?(T(),ve(q(Qe),{key:0,value:C.value},{header:re(()=>[U("div",Tt,[te(q(we),{icon:"pi pi-save",raised:"",label:"Uploader",onClick:m[0]||(m[0]=v=>c())})])]),default:re(()=>[te(q(Ie),{headerStyle:"width: 50px"},{body:re(({index:v})=>[r.value[v]?(T(),B("i",Ot)):fe("",!0),f.value[v]?(T(),B("i",Rt)):fe("",!0)]),_:1}),te(q(Ie),{field:"id",header:"#"},{body:re(({index:v})=>[Me(G(v+1),1)]),_:1}),te(q(Ie),{headerStyle:"width: 200px",field:"issue",header:"Thème"},{body:re(({data:v})=>[te(q(Be),{severity:v.issue_id?"success":"danger",value:v.issue},null,8,["severity","value"])]),_:1}),te(q(Ie),{field:"content",header:"Opinion"})]),_:1},8,["value"])):fe("",!0)}},At={style:{width:"850px"}},Lt=U("h5",null,"Importer un CSV d'opinions",-1),Ft={key:0,class:"field md:col-6"},Pt={key:0},$t={key:1},Mt={key:0},zt={key:1},Wt={__name:"AppOpinionsCsvImport",setup(a){const n=Ve("dialogRef"),r=nt(),f=ue([{label:"Choisir un candidat"},{label:"Charger le fichier"},{label:"Vérifier vos données et uploader"}]),I=ue(0),g=ue(null),k=ue([]);ze(()=>{var y;g.value=(y=n.value.data)==null?void 0:y.personId,r.persons||r.refreshPersons()});const C=()=>{I.value!=2&&I.value++},c=y=>{console.log("onParseComplete",y),k.value=y,C()};return(y,m)=>(T(),B("div",At,[Lt,te(q(Ne),{model:f.value,activeStep:I.value,"onUpdate:activeStep":m[0]||(m[0]=v=>I.value=v),readonly:!1},null,8,["model","activeStep"]),U("div",null,[I.value==0?(T(),B("div",Ft,[te(q(Je),{modelValue:g.value,"onUpdate:modelValue":m[1]||(m[1]=v=>g.value=v),options:q(r).persons,optionLabel:"firstname",optionValue:"id",placeholder:"Choisir une personne",class:"w-full",filter:""},{value:re(v=>[v.value?(T(),B("span",Pt,G(q(r).personsNames[v.value]),1)):(T(),B("span",$t,G(v.placeholder),1))]),option:re(v=>[v.option?(T(),B("span",Mt,G(v.option.firstname)+" "+G(v.option.lastname),1)):(T(),B("span",zt,G(v.placeholder),1))]),_:1},8,["modelValue","options"])])):I.value==1?(T(),ve(It,{key:1,onComplete:m[2]||(m[2]=v=>c(v))})):I.value==2?(T(),ve(Dt,{key:2,parsedLines:k.value,authorId:g.value},null,8,["parsedLines","authorId"])):fe("",!0)])]))}};export{Wt as default};
