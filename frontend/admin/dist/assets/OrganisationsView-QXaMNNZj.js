import{d as j,r as _,A as x,o as T,u as V,a as m,c as b,b as a,e as P,f as e,g as t,w as l,h as $,i as O,_ as y}from"./index-pfDSeHtQ.js";import{s as E,a as s,b as M,_ as B}from"./AppTableSkeleton-WvaxyVAQ.js";import{s as d}from"./index.esm-Fo_ZESOz.js";const D=j("organisations",()=>{const f=_(null);return{organisations:f,refreshOrganisations:async()=>x.organisations.listOrganisations().then(n=>f.value=n)}}),I={class:"grid"},N={class:"col-12"},F={key:1,class:"card"},L={class:"my-2"},U=a("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},[a("h5",{class:"m-0"},"Organisations")],-1),R={key:2,class:"px-4 py-5 shadow-1 flex flex-column md:flex-row md:align-items-center justify-content-between mb-3",style:{width:"600px","background-color":"white"}},q=a("div",null,[a("div",{class:"font-medium text-xl mt-2 mb-3"},"Aucune organisation"),a("div",{class:"font-medium"},"Cliquer sur le bouton suivant pour rajouter une première organisation à la base de données")],-1),z={class:"mt-4 mr-auto md:mt-0 md:mr-0"},W={__name:"OrganisationsView",setup(f){const c=_(!1),n=D();T(()=>{c.value=!0,n.refreshOrganisations().then(()=>c.value=!1)});const o=_(null),g=_(!1),w=()=>{var r;let i=(r=o.value)==null?void 0:r.map(u=>u.id);g.value=!0,x.organisations.deleteOrganisations(i).then(()=>{n.refreshOrganisations(),o.value=null}).finally(()=>g.value=!1)},v=V(),k=O(()=>y(()=>import("./OrganisationsUpsertForm-MO8xu-Yd.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),h=(i={})=>{v.open(k,{data:i,onClose:n.refreshOrganisations,props:{modal:!0}})},C=O(()=>y(()=>import("./OrganisationsMembers-5pxEHpAK.js"),__vite__mapDeps([10,2,3,11,8,5,12]))),S=(i={})=>{v.open(C,{data:i,props:{modal:!0}})};return(i,r)=>{var u;return m(),b("div",I,[a("div",N,[c.value?(m(),P(B,{key:0})):((u=e(n).organisations)==null?void 0:u.length)>0?(m(),b("div",F,[t(e(E),{class:"mb-4"},{start:l(()=>[a("div",L,[t(e(d),{label:"Ajouter une organisation",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:h}),t(e(d),{label:"Supprimer la sélection",icon:"pi pi-trash",class:"p-button-danger",onClick:w,disabled:!o.value||!o.value.length,loading:g.value},null,8,["disabled","loading"])])]),_:1}),t(e(M),{value:e(n).organisations,selection:o.value,"onUpdate:selection":r[0]||(r[0]=p=>o.value=p)},{header:l(()=>[U]),default:l(()=>[t(e(s),{selectionMode:"multiple",headerStyle:"width: 3rem"}),t(e(s),{headerStyle:"min-width: 120px"},{body:l(({data:p})=>[t(e(d),{class:"p-button-text p-button-rounded",icon:"pi pi-pencil",onClick:A=>h(p)},null,8,["onClick"]),t(e(d),{class:"p-button-text p-button-rounded",icon:"pi pi-users",onClick:A=>S(p)},null,8,["onClick"])]),_:1}),t(e(s),{field:"name",header:"Nom"}),t(e(s),{field:"type",header:"Type"}),t(e(s),{headerStyle:"min-width: 150px",field:"description",header:"Description"}),t(e(s),{field:"twitter",header:"Twitter"}),t(e(s),{field:"facebook",header:"Facebook"}),t(e(s),{field:"instagram",header:"Instagram"}),t(e(s),{field:"website",header:"Website"}),t(e(s),{field:"address",header:"Adresse"}),t(e(s),{field:"contact_phone",header:"Contact (Téléphone)"}),t(e(s),{field:"contact_email",header:"Contact (email)"}),t(e(s),{field:"parent_organisation_id",header:"Parent"})]),_:1},8,["value","selection"])])):(m(),b("div",R,[q,a("div",z,[t(e(d),{class:"p-button font-bold px-5 py-3 p-button-success p-button-rounded p-button-raised",onClick:h},{default:l(()=>[$("Ajouter")]),_:1})])]))])])}}},K=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));export{K as O,D as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/OrganisationsUpsertForm-MO8xu-Yd.js","assets/index.esm-jQfUCHAk.js","assets/index-pfDSeHtQ.js","assets/index-D9x--RlZ.css","assets/message.esm-P4WTatHg.js","assets/index.esm-Fo_ZESOz.js","assets/textarea.esm-03uqadIT.js","assets/radiobutton.esm-mBE3J-3d.js","assets/AppTableSkeleton-WvaxyVAQ.js","assets/inputmask.esm-nPK251D_.js","assets/OrganisationsMembers-5pxEHpAK.js","assets/BasePersonsTable-a4fNT65c.js","assets/avatar.esm-DpJqIjMk.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
