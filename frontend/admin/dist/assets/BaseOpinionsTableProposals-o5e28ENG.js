import{t as C,u as A,r as f,a as c,c as b,b as t,f as e,e as B,g as o,w as p,h as j,i as T,_ as $,Y as S,o as O,A as R}from"./index-jfYll-nw.js";import{_ as V,s as E,a as m,b as N}from"./AppTableSkeleton-fANpGBpA.js";import{s as _}from"./index.esm-vgsyuL-8.js";const U={class:"grid"},D={class:"col-12"},F={key:1,class:"card"},I={class:"my-2"},L=t("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},[t("h5",{class:"m-0"},"Propositions")],-1),M={key:2,class:"px-4 py-5 shadow-1 flex flex-column md:flex-row md:align-items-center justify-content-between mb-3",style:{width:"600px","background-color":"white"}},q=t("div",null,[t("div",{class:"font-medium text-xl mt-2 mb-3"},"Aucune proposition"),t("div",{class:"font-medium"},"Cliquer sur le bouton suivant pour rajouter une première proposition à la base de données")],-1),Y={class:"mt-4 mr-auto md:mt-0 md:mr-0"},z={__name:"BaseOpinionsTableProposalsTable",props:{proposals:Array,opinion:Object,loading:{type:Boolean,default:!1}},emits:["refresh"],setup(y,{emit:l}){const v=y,{opinion:n,proposals:a,loading:i}=C(v),r=l,d=A(),h=T(()=>$(()=>import("./BaseOpinionsTableProposalsTableUpsertForm-s9N12dkg.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),g=w=>{d.open(h,{data:{opinion:n,proposal:w},onClose:()=>r("refresh"),props:{modal:!0}})},u=f(null),P=()=>console.log("deleteSelection");return(w,s)=>{var k;return c(),b("div",U,[t("div",D,[e(i)?(c(),B(V,{key:0})):((k=e(a))==null?void 0:k.length)>0?(c(),b("div",F,[o(e(E),{class:"mb-4"},{start:p(()=>[t("div",I,[o(e(_),{label:"Ajouter une proposition",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:s[0]||(s[0]=()=>g())}),o(e(_),{label:"Supprimer la sélection",icon:"pi pi-trash",class:"p-button-danger",onClick:s[1]||(s[1]=()=>P()),disabled:!u.value||!u.value.length,loading:e(i)},null,8,["disabled","loading"])])]),_:1}),o(e(N),{value:e(a),selection:u.value,"onUpdate:selection":s[2]||(s[2]=x=>u.value=x)},{header:p(()=>[L]),default:p(()=>[o(e(m),{selectionMode:"multiple",headerStyle:"width: 3rem"}),o(e(m),{headerStyle:"width: 60px"},{body:p(({data:x})=>[o(e(_),{class:"p-button-text p-button-rounded",icon:"pi pi-pencil",onClick:H=>g(x)},null,8,["onClick"])]),_:1}),o(e(m),{headerStyle:"width: 80px",field:"number",label:"#"}),o(e(m),{field:"content"})]),_:1},8,["value","selection"])])):(c(),b("div",M,[q,t("div",Y,[o(e(_),{class:"p-button font-bold px-5 py-3 p-button-success p-button-rounded p-button-raised",onClick:s[3]||(s[3]=()=>g())},{default:p(()=>[j("Ajouter")]),_:1})])]))])])}}},G={style:{width:"850px"}},W={__name:"BaseOpinionsTableProposals",setup(y){const l=f(!1),v=S("dialogRef"),n=f(null),a=f([]),i=()=>{var r,d;l.value=!0,(r=n.value)!=null&&r.id&&R.opinions.listProposals((d=n.value)==null?void 0:d.id).then(h=>a.value=h).then(()=>l.value=!1)};return O(()=>{n.value=v.value.data,i()}),(r,d)=>(c(),b("div",G,[o(z,{proposals:a.value,opinion:n.value,loading:l.value,onRefresh:i},null,8,["proposals","opinion","loading"])]))}};export{W as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/BaseOpinionsTableProposalsTableUpsertForm-s9N12dkg.js","assets/index.esm-P-gXdjAE.js","assets/index-jfYll-nw.js","assets/index-ZWerLMmy.css","assets/message.esm-er91D30t.js","assets/index.esm-vgsyuL-8.js","assets/textarea.esm-vCzr1SR7.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
