import{Y as N,r as S,u as D,a as u,c as f,b as o,f as e,e as x,g as s,w as r,j as O,h as T,A as I,i as k,_ as P}from"./index-x8nUED8N.js";import{s as R,a as d,b as U,_ as L}from"./AppTableSkeleton-HNvhEeWo.js";import{s as c}from"./index.esm-Au2F2Qkt.js";import{s as q}from"./avatar.esm-u3O238l-.js";const z={class:"grid"},M={class:"col-12"},Y={key:1,class:"card"},G={class:"my-2"},H=o("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},[o("h5",{class:"m-0"},"Personnes")],-1),J={key:2,class:"px-4 py-5 shadow-1 flex flex-column md:flex-row md:align-items-center justify-content-between mb-3",style:{width:"600px","background-color":"white"}},K=o("div",null,[o("div",{class:"font-medium text-xl mt-2 mb-3"},"Aucune persone"),o("div",{class:"font-medium"},"Cliquer sur le bouton suivant pour rajouter une première personne à la base de données")],-1),Q={class:"mt-4 mr-auto md:mt-0 md:mr-0"},se={__name:"BasePersonsTable",props:{persons:Array,addFunction:{type:Function,default:null},deleteFunction:{type:Function,default:null},loading:{type:Boolean,default:!1}},emits:["refresh"],setup(w,{emit:C}){const F=w,{persons:_,loading:a,addFunction:v,deleteFunction:h}=N(F),m=C,n=S(null),A=()=>{var t;let i=(t=n.value)==null?void 0:t.map(p=>p.id);a.value=!0,I.persons.deletePersons(i).then(()=>{m("refresh"),n.value=null}).finally(()=>a.value=!1)},$=()=>{if(h.value)a.value=!0,h.value(n.value).then(()=>a.value=!1).then(()=>m("refresh"));else return A()},b=D(),j=k(()=>P(()=>import("./PersonsUpsertForm-IfjY5mAH.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),y=(i={})=>{b.open(j,{data:i,onClose:()=>m("refresh"),props:{modal:!0}})},g=()=>v.value?v.value():y(),B=k(()=>P(()=>import("./PersonsOpinions-pGcfLmFP.js"),__vite__mapDeps([11,12,2,3,13,8,4,14]))),V=(i={})=>{b.open(B,{data:i,props:{modal:!0}})};return(i,t)=>{var p;return u(),f("div",z,[o("div",M,[e(a)?(u(),x(L,{key:0})):((p=e(_))==null?void 0:p.length)>0?(u(),f("div",Y,[s(e(R),{class:"mb-4"},{start:r(()=>[o("div",G,[s(e(c),{label:"Ajouter une personne",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:t[0]||(t[0]=()=>g())}),s(e(c),{label:"Supprimer la sélection",icon:"pi pi-trash",class:"p-button-danger",onClick:t[1]||(t[1]=()=>$()),disabled:!n.value||!n.value.length,loading:e(a)},null,8,["disabled","loading"])])]),_:1}),s(e(U),{value:e(_),selection:n.value,"onUpdate:selection":t[2]||(t[2]=l=>n.value=l)},{header:r(()=>[H]),default:r(()=>[s(e(d),{selectionMode:"multiple",headerStyle:"width: 3rem"}),s(e(d),{headerStyle:"width: 120px"},{body:r(({data:l})=>[s(e(c),{class:"p-button-text p-button-rounded",icon:"pi pi-pencil",onClick:E=>y(l)},null,8,["onClick"]),s(e(c),{class:"p-button-text p-button-rounded",icon:"pi pi-megaphone",onClick:E=>V(l)},null,8,["onClick"])]),_:1}),s(e(d),{field:"photo",headerStyle:"width: 100px"},{body:r(({data:l})=>[l.photo?(u(),x(e(q),{key:0,class:"contained-image",image:l.photo,size:"xlarge",shape:"rectangle"},null,8,["image"])):O("",!0)]),_:1}),s(e(d),{field:"firstname",header:"Prénom"}),s(e(d),{field:"lastname",header:"Nom"}),s(e(d),{field:"description",header:"Description"})]),_:1},8,["value","selection"])])):(u(),f("div",J,[K,o("div",Q,[s(e(c),{class:"p-button font-bold px-5 py-3 p-button-success p-button-rounded p-button-raised",onClick:t[3]||(t[3]=()=>g())},{default:r(()=>[T("Ajouter")]),_:1})])]))])])}}};export{se as _};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/PersonsUpsertForm-IfjY5mAH.js","assets/message.esm-0r3cPhwl.js","assets/index-x8nUED8N.js","assets/index-D9x--RlZ.css","assets/index.esm-Au2F2Qkt.js","assets/textarea.esm-l3Im041D.js","assets/editor.esm-QBfyv9Ib.js","assets/AppPicturesSelector-BmP6Tqh3.js","assets/AppTableSkeleton-HNvhEeWo.js","assets/index.esm-MLzmlGoR.js","assets/format-39s6QTMr.js","assets/PersonsOpinions-pGcfLmFP.js","assets/opinions-qsFksj2M.js","assets/BaseOpinionsTable-Cl4R-MeX.js","assets/avatar.esm-u3O238l-.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
