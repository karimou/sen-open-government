import{c as R,a as i,b as E,u as j,s as q}from"./message.esm-pQHG6DyT.js";import{b as d,s as I}from"./index.esm-8Ya_lrTD.js";import{s as T}from"./textarea.esm-XSpKjTFH.js";import"./editor.esm-yP943D0s.js";import{r as A,X as z,o as C,A as F,a as k,c as $,b as o,E as P,g as a,f as l,V as n,F as L,n as W,e as X,w as G,h as H}from"./index-J8nPbcPQ.js";import{_ as J}from"./AppPicturesSelector-i4GU1r7u.js";import{f as K}from"./format-39s6QTMr.js";import"./AppTableSkeleton-IygGFe_T.js";import"./index.esm-mNSdKkpb.js";const O={style:{width:"450px"}},Q=["initial-values"],Y={class:"formgrid grid"},Z={class:"field col-6"},ee=o("label",{for:"firstname"},"PrÃ©nom",-1),te={class:"field col-6"},le=o("label",{for:"title"},"Nom",-1),oe={class:"formgrid grid"},se={class:"field col-6"},ae=o("label",{for:"date_of_birth"},"Date de naissance",-1),ie={class:"field col-6"},ne=o("label",{for:"occupation"},"Profession",-1),de={class:"field"},re=o("label",{for:"description"},"Description",-1),ue={class:"formgrid grid"},ce={class:"field col-6"},me=o("label",{for:"title"},"Website",-1),fe={class:"field col-6"},_e=o("label",{for:"title"},"Facebook",-1),pe={class:"field col-6"},ve=o("label",{for:"title"},"Twitter",-1),be={class:"field col-6"},Ve=o("label",{for:"title"},"Instagram",-1),Ie={__name:"PersonsUpsertForm",setup(ge){const S=R({firstname:i().required(),lastname:i().required(),gender:i(),date_of_birth:E(),occupation:i(),description:i(),website:i(),facebook:i(),twitter:i(),instagram:i(),photo:i()}),{handleSubmit:B,errors:D,defineField:s,setFieldValue:U}=j({validationSchema:S}),[f,we]=s("firstname"),[_,he]=s("lastname");s("gender");const[p,ye]=s("date_of_birth"),[v,Ae]=s("description"),[b,ke]=s("occupation"),[V,Ue]=s("twitter"),[g,xe]=s("facebook"),[w,Fe]=s("instagram"),[h,$e]=s("website"),[y,Pe]=s("photo"),c=A(null),M=A({}),r=z("dialogRef");C(()=>{var u,e;(u=r.value.data)!=null&&u.date_of_birth&&U("date_of_birth",K(new Date(r.value.data.date_of_birth),"yyyy-MM-dd")),["firstname","lastname","gender","occupation","description","facebook","instagram","twitter","website","photo"].forEach(t=>{r.value.data[t]&&U(t,r.value.data[t])}),c.value=(e=r.value.data)==null?void 0:e.id});const m=A(!1),x=B(u=>{m.value=!0,c.value?F.persons.updatePerson({...u,id:c.value}).then(e=>{r.value.close("success")}).finally(()=>m.value=!1):F.persons.addPerson(u).then(e=>{r.value.close("success")}).finally(()=>m.value=!1)});return(u,e)=>(k(),$("div",O,[o("h5",null,P(c.value?"Modifier":"Ajouter")+" une personne",1),o("form",{onSubmit:e[10]||(e[10]=(...t)=>l(x)&&l(x)(...t)),"initial-values":M.value.value},[a(J,{image:l(y),"onUpdate:image":e[0]||(e[0]=t=>n(y)?y.value=t:null)},null,8,["image"]),o("div",Y,[o("div",Z,[ee,a(l(d),{id:"firstname",type:"text",modelValue:l(f),"onUpdate:modelValue":e[1]||(e[1]=t=>n(f)?f.value=t:null),class:"w-full"},null,8,["modelValue"])]),o("div",te,[le,a(l(d),{id:"lastname",type:"text",modelValue:l(_),"onUpdate:modelValue":e[2]||(e[2]=t=>n(_)?_.value=t:null),class:"w-full"},null,8,["modelValue"])])]),o("div",oe,[o("div",se,[ae,a(l(d),{id:"date_of_birth",type:"date",modelValue:l(p),"onUpdate:modelValue":e[3]||(e[3]=t=>n(p)?p.value=t:null),class:"w-full"},null,8,["modelValue"])]),o("div",ie,[ne,a(l(d),{id:"occupation",modelValue:l(b),"onUpdate:modelValue":e[4]||(e[4]=t=>n(b)?b.value=t:null),class:"w-full"},null,8,["modelValue"])])]),o("div",de,[re,a(l(T),{id:"description",modelValue:l(v),"onUpdate:modelValue":e[5]||(e[5]=t=>n(v)?v.value=t:null),class:"w-full",autoResize:!0},null,8,["modelValue"])]),o("div",ue,[o("div",ce,[me,a(l(d),{id:"website",type:"url",modelValue:l(h),"onUpdate:modelValue":e[6]||(e[6]=t=>n(h)?h.value=t:null),class:"w-full"},null,8,["modelValue"])]),o("div",fe,[_e,a(l(d),{id:"facebook",type:"text",modelValue:l(g),"onUpdate:modelValue":e[7]||(e[7]=t=>n(g)?g.value=t:null),class:"w-full"},null,8,["modelValue"])]),o("div",pe,[ve,a(l(d),{id:"twitter",type:"text",modelValue:l(V),"onUpdate:modelValue":e[8]||(e[8]=t=>n(V)?V.value=t:null),class:"w-full"},null,8,["modelValue"])]),o("div",be,[Ve,a(l(d),{id:"instagram",type:"text",modelValue:l(w),"onUpdate:modelValue":e[9]||(e[9]=t=>n(w)?w.value=t:null),class:"w-full"},null,8,["modelValue"])])]),a(l(I),{type:"submit",label:"Soumettre",class:"w-full",loading:m.value},null,8,["loading"])],40,Q),(k(!0),$(L,null,W(l(D),(t,N)=>(k(),X(l(q),{severity:"error",key:N},{default:G(()=>[H(P(t),1)]),_:2},1024))),128))]))}};export{Ie as default};
