import{r as h,a as A,u as S,c as v,b as t,e as V,f as e,g as s,w as a,o as d,h as $,A as j,i as x,_ as g}from"./index-HWtTsvFM.js";import{s as E,a as p,b as O,_ as T}from"./AppTableSkeleton-3-U8kaGt.js";import{s as u}from"./index.esm-FaUUA4nG.js";import{u as B}from"./issues-1SwNP8eB.js";import{u as D}from"./opinions-bDVTOwqO.js";const P={class:"grid"},L={class:"col-12"},N={key:1,class:"card"},U={class:"my-2"},q=t("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},[t("h5",{class:"m-0"},"Thèmes")],-1),F={key:2,class:"px-4 py-5 shadow-1 flex flex-column md:flex-row md:align-items-center justify-content-between mb-3",style:{width:"600px","background-color":"white"}},M=t("div",null,[t("div",{class:"font-medium text-xl mt-2 mb-3"},"Aucun thème"),t("div",{class:"font-medium"},"Cliquer sur le bouton suivant pour rajouter un premier thème à la base de données")],-1),R={class:"mt-4 mr-auto md:mt-0 md:mr-0"},W={__name:"IssuesView",setup(z){const n=B();D();const m=h(!1);A(()=>{m.value=!0,n.refreshIssues().then(()=>m.value=!1)});const o=h(null),_=h(!1),y=()=>{var i;let l=(i=o.value)==null?void 0:i.map(r=>r.id);_.value=!0,j.issues.deleteIssues(l).then(()=>{n.refreshIssues(),o.value=null}).finally(()=>_.value=!1)},b=S(),I=x(()=>g(()=>import("./IssuesUpsertForm-QX3gEJ_O.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),f=(l={})=>{b.open(I,{data:l,onClose:n.refreshIssues,props:{modal:!0}})},k=x(()=>g(()=>import("./IssuesOpinions-cJcRm3EU.js"),__vite__mapDeps([7,8,2,3,9,10,4]))),w=(l={})=>{b.open(k,{data:l,props:{modal:!0}})};return(l,i)=>{var r;return d(),v("div",P,[t("div",L,[m.value?(d(),V(T,{key:0})):((r=e(n).issues)==null?void 0:r.length)>0?(d(),v("div",N,[s(e(E),{class:"mb-4"},{start:a(()=>[t("div",U,[s(e(u),{label:"Ajouter un thème politique",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:f}),s(e(u),{label:"Supprimer la sélection",icon:"pi pi-trash",class:"p-button-danger",onClick:y,disabled:!o.value||!o.value.length,loading:_.value},null,8,["disabled","loading"])])]),_:1}),s(e(O),{value:e(n).issues,selection:o.value,"onUpdate:selection":i[0]||(i[0]=c=>o.value=c)},{header:a(()=>[q]),default:a(()=>[s(e(p),{selectionMode:"multiple",headerStyle:"width: 3rem"}),s(e(p),{headerStyle:"min-width: 100px"},{body:a(({data:c})=>[s(e(u),{class:"p-button-text p-button-rounded",icon:"pi pi-pencil",onClick:C=>f(c)},null,8,["onClick"]),s(e(u),{class:"p-button-text p-button-rounded",icon:"pi pi-megaphone",onClick:C=>w(c)},null,8,["onClick"])]),_:1}),s(e(p),{field:"title",header:"Titre"}),s(e(p),{field:"short_description",header:"Description"})]),_:1},8,["value","selection"])])):(d(),v("div",F,[M,t("div",R,[s(e(u),{class:"p-button font-bold px-5 py-3 p-button-success p-button-rounded p-button-raised",onClick:f},{default:a(()=>[$("Ajouter")]),_:1})])]))])])}}};export{W as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/IssuesUpsertForm-QX3gEJ_O.js","assets/message.esm-OieoKZiQ.js","assets/index-HWtTsvFM.js","assets/index-tbN9M-MT.css","assets/index.esm-FaUUA4nG.js","assets/textarea.esm-WoudxIoE.js","assets/editor.esm-kVSwRZPD.js","assets/IssuesOpinions-cJcRm3EU.js","assets/opinions-bDVTOwqO.js","assets/BaseOpinionsTable-MB-0BCd-.js","assets/AppTableSkeleton-3-U8kaGt.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
