import{a as I,r as b,u as V,c as f,b as t,e,f as s,w as l,o as h,g as O,p as j,h as E,A as U,i as x,_ as P}from"./index-vwDixBhf.js";import{s as $,a,b as D}from"./toolbar.esm-IUUGoDwr.js";import{s as d}from"./inputtext.esm-odSb5XQY.js";import{u as F}from"./persons-682ZcoEM.js";import{u as N}from"./opinions-btLInoIu.js";import{_ as B}from"./_plugin-vue_export-helper-x3n3nnut.js";const g=c=>(j("data-v-d3e4f964"),c=c(),E(),c),T={class:"grid"},L={class:"col-12"},M={key:0,class:"card"},R={class:"my-2"},q=g(()=>t("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},[t("h5",{class:"m-0"},"Personnes")],-1)),z={key:1,class:"px-4 py-5 shadow-1 flex flex-column md:flex-row md:align-items-center justify-content-between mb-3",style:{width:"600px","background-color":"white"}},G=g(()=>t("div",null,[t("div",{class:"font-medium text-xl mt-2 mb-3"},"Aucune persone"),t("div",{class:"font-medium"},"Cliquer sur le bouton suivant pour rajouter une première élection à la base de données")],-1)),H={class:"mt-4 mr-auto md:mt-0 md:mr-0"},J={__name:"PersonsView",setup(c){const i=F(),w=N();I(i.refreshPersons);const n=b(null),m=b(!1),y=()=>{var r;let o=(r=n.value)==null?void 0:r.map(p=>p.id);m.value=!0,U.persons.deletePersons(o).then(()=>{i.refreshPersons(),n.value=null}).finally(()=>m.value=!1)},v=V(),k=x(()=>P(()=>import("./PersonsUpsertForm-aPrzghLV.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),_=(o={})=>{v.open(k,{data:o,onClose:i.refreshPersons,props:{modal:!0}})},C=x(()=>P(()=>import("./OpinionsUpsertForm-jdL4DIUK.js"),__vite__mapDeps([10,1,2,3,4,5,6,8,7,11,12]))),S=(o={})=>{v.open(C,{data:{author_id:o==null?void 0:o.id},onClose:w.refreshOpinions,props:{modal:!0}})};return(o,r)=>{var p;return h(),f("div",T,[t("div",L,[((p=e(i).persons)==null?void 0:p.length)>0?(h(),f("div",M,[s(e($),{class:"mb-4"},{start:l(()=>[t("div",R,[s(e(d),{label:"Ajouter une personne",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:_}),s(e(d),{label:"Supprimer la sélection",icon:"pi pi-trash",class:"p-button-danger",onClick:y,disabled:!n.value||!n.value.length,loading:m.value},null,8,["disabled","loading"])])]),_:1}),s(e(D),{value:e(i).persons,selection:n.value,"onUpdate:selection":r[0]||(r[0]=u=>n.value=u)},{header:l(()=>[q]),default:l(()=>[s(e(a),{selectionMode:"multiple",headerStyle:"width: 3rem"}),s(e(a),{headerStyle:"min-width: 100px"},{body:l(({data:u})=>[s(e(d),{class:"p-button-text p-button-rounded",icon:"pi pi-pencil",onClick:A=>_(u)},null,8,["onClick"]),s(e(d),{class:"p-button-text p-button-rounded",icon:"pi pi-megaphone",onClick:A=>S(u)},null,8,["onClick"])]),_:1}),s(e(a),{field:"firstname",header:"Prénom"}),s(e(a),{field:"lastname",header:"Nom"}),s(e(a),{field:"description",header:"Description"})]),_:1},8,["value","selection"])])):(h(),f("div",z,[G,t("div",H,[s(e(d),{class:"p-button font-bold px-5 py-3 p-button-success p-button-rounded p-button-raised",onClick:_},{default:l(()=>[O("Ajouter")]),_:1})])]))])])}}},ee=B(J,[["__scopeId","data-v-d3e4f964"]]);export{ee as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/PersonsUpsertForm-aPrzghLV.js","assets/index.esm-Ul8tbHrw.js","assets/index-vwDixBhf.js","assets/index-tbN9M-MT.css","assets/inputtext.esm-odSb5XQY.js","assets/textarea.esm-JJfSMBS-.js","assets/editor.esm-yeS7qnU0.js","assets/message.esm-QJ3mL3J0.js","assets/toolbar.esm-IUUGoDwr.js","assets/format-39s6QTMr.js","assets/OpinionsUpsertForm-jdL4DIUK.js","assets/persons-682ZcoEM.js","assets/issues-B92SDSdP.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
