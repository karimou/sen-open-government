import{c as N,a as o,b as R,u as D,s as j}from"./message.esm-7AaCCNeN.js";import{b as n,s as q}from"./index.esm-vGdYQZef.js";import{s as E}from"./textarea.esm-Zp6g0_lQ.js";import"./editor.esm-M_ny7rpB.js";import{r as y,a0 as I,a as T,A as U,o as k,c as F,b as s,t as S,f as i,e as l,Y as d,F as z,v as C,k as L,w as W,g as Y}from"./index-Tc2rU4CK.js";import{f as G}from"./format-39s6QTMr.js";const H={style:{width:"450px"}},J=["initial-values"],K={class:"formgrid grid"},O={class:"field col-6"},Q=s("label",{for:"firstname"},"PrÃ©nom",-1),X={class:"field col-6"},Z=s("label",{for:"title"},"Nom",-1),ee={class:"formgrid grid"},te={class:"field col-6"},le=s("label",{for:"date_of_birth"},"Date de naissance",-1),se={class:"field"},ae=s("label",{for:"description"},"Description",-1),oe={class:"formgrid grid"},ie={class:"field col-6"},de=s("label",{for:"title"},"Website",-1),re={class:"field col-6"},ne=s("label",{for:"title"},"Facebook",-1),ue={class:"field col-6"},fe=s("label",{for:"title"},"Twitter",-1),me={class:"field col-6"},ce=s("label",{for:"title"},"Instagram",-1),$e={__name:"PersonsUpsertForm",setup(_e){const $=N({firstname:o().required(),lastname:o().required(),gender:o(),date_of_birth:R(),description:o(),website:o(),facebook:o(),twitter:o(),instagram:o(),photo:o()}),{handleSubmit:P,errors:B,defineField:a,setFieldValue:A}=D({validationSchema:$}),[_,pe]=a("firstname"),[p,ve]=a("lastname");a("gender");const[v,be]=a("date_of_birth"),[b,Ve]=a("description"),[V,he]=a("twitter"),[h,we]=a("facebook"),[w,ge]=a("instagram"),[g,ye]=a("website");a("photo");const m=y(null),M=y({}),r=I("dialogRef");T(()=>{var u,e,t;(u=r.value.data)!=null&&u.date_of_birth&&A("date_of_birth",G((e=r.value.date_of_birth)==null?void 0:e.date,"yyyy-MM-dd")),["firstname","lastname","gender","description","facebook","instagram","twitter","website","photo"].forEach(f=>{r.value.data[f]&&A(f,r.value.data[f])}),m.value=(t=r.value.data)==null?void 0:t.id});const c=y(!1),x=P(u=>{c.value=!0,m.value?U.persons.updatePerson({...u,id:m.value}).then(e=>{r.value.close()}).finally(()=>c.value=!1):U.persons.addPerson(u).then(e=>{r.value.close()}).finally(()=>c.value=!1)});return(u,e)=>(k(),F("div",H,[s("h5",null,S(m.value?"Modifier":"Ajouter")+" une personne",1),s("form",{onSubmit:e[8]||(e[8]=(...t)=>l(x)&&l(x)(...t)),"initial-values":M.value.value},[s("div",K,[s("div",O,[Q,i(l(n),{id:"firstname",type:"text",modelValue:l(_),"onUpdate:modelValue":e[0]||(e[0]=t=>d(_)?_.value=t:null),class:"w-full"},null,8,["modelValue"])]),s("div",X,[Z,i(l(n),{id:"lastname",type:"text",modelValue:l(p),"onUpdate:modelValue":e[1]||(e[1]=t=>d(p)?p.value=t:null),class:"w-full"},null,8,["modelValue"])])]),s("div",ee,[s("div",te,[le,i(l(n),{id:"date_of_birth",type:"date",modelValue:l(v),"onUpdate:modelValue":e[2]||(e[2]=t=>d(v)?v.value=t:null),class:"w-full"},null,8,["modelValue"])])]),s("div",se,[ae,i(l(E),{id:"description",modelValue:l(b),"onUpdate:modelValue":e[3]||(e[3]=t=>d(b)?b.value=t:null),class:"w-full",autoResize:!0},null,8,["modelValue"])]),s("div",oe,[s("div",ie,[de,i(l(n),{id:"website",type:"url",modelValue:l(g),"onUpdate:modelValue":e[4]||(e[4]=t=>d(g)?g.value=t:null),class:"w-full"},null,8,["modelValue"])]),s("div",re,[ne,i(l(n),{id:"facebook",type:"text",modelValue:l(h),"onUpdate:modelValue":e[5]||(e[5]=t=>d(h)?h.value=t:null),class:"w-full"},null,8,["modelValue"])]),s("div",ue,[fe,i(l(n),{id:"twitter",type:"text",modelValue:l(V),"onUpdate:modelValue":e[6]||(e[6]=t=>d(V)?V.value=t:null),class:"w-full"},null,8,["modelValue"])]),s("div",me,[ce,i(l(n),{id:"instagram",type:"text",modelValue:l(w),"onUpdate:modelValue":e[7]||(e[7]=t=>d(w)?w.value=t:null),class:"w-full"},null,8,["modelValue"])])]),i(l(q),{type:"submit",label:"Soumettre",class:"w-full",loading:c.value},null,8,["loading"])],40,J),(k(!0),F(z,null,C(l(B),(t,f)=>(k(),L(l(j),{severity:"error",key:f},{default:W(()=>[Y(S(t),1)]),_:2},1024))),128))]))}};export{$e as default};
