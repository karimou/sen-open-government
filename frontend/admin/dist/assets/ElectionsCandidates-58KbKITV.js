import{r as c,Y as A,a as E,u as j,o as u,c as h,e as I,g as t,w as r,f as a,b as n,t as B,h as D,A as g,i as N,_ as P}from"./index-9WfbBEsR.js";import{_ as S,s as V,a as m,b as $}from"./AppTableSkeleton-FqvfmN-I.js";import{s as b}from"./index.esm-7P6y4mBq.js";const L={style:{width:"650px"}},R={key:1},F={class:"my-2"},M={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},T={class:"m-0"},q={key:2,class:"px-4 py-5 shadow-1 flex flex-column md:flex-row md:align-items-center justify-content-between mb-3",style:{width:"600px","background-color":"white"}},O=n("div",null,[n("div",{class:"font-medium text-xl mt-2 mb-3"},"Aucun candidat à cette élection"),n("div",{class:"font-medium"},"Cliquer sur le bouton suivant pour rajouter un premier candidat à l'élection à la base de données")],-1),U={class:"mt-4 mr-auto md:mt-0 md:mr-0"},J={__name:"ElectionsCandidates",setup(Y){const p=c(!1),x=A("dialogRef"),i=c(null),v=c([]),f=()=>{var s,e;p.value=!0,(s=i.value)!=null&&s.id&&g.elections.listElectionCandidates((e=i.value)==null?void 0:e.id).then(d=>v.value=d).then(()=>p.value=!1)};E(()=>{i.value=x.value.data,f()});const y=j(),w=N(()=>P(()=>import("./ElectionCandidateAdditionForm-N0fcelFI.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),C=()=>{var s;y.open(w,{data:{electionId:(s=i.value)==null?void 0:s.id},onClose:e=>{(e==null?void 0:e.data)=="success"&&f()},props:{modal:!0}})},o=c(null),_=c(!1),k=()=>{var e;let s=(e=o.value)==null?void 0:e.map(d=>{var l;return{electionId:(l=i.value)==null?void 0:l.id,personId:d.id}});_.value=!0,g.elections.removeElectionCandidates(s).then(()=>{f(),o.value=null}).finally(()=>_.value=!1)};return(s,e)=>{var d;return u(),h("div",L,[p.value?(u(),I(S,{key:0})):((d=v.value)==null?void 0:d.length)>0?(u(),h("div",R,[t(a(V),{class:"mb-4"},{start:r(()=>[n("div",F,[t(a(b),{label:"Ajouter un candidat",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:C}),t(a(b),{label:"Supprimer la sélection",icon:"pi pi-trash",class:"p-button-danger",onClick:k,disabled:!o.value||!o.value.length,loading:_.value},null,8,["disabled","loading"])])]),_:1}),t(a($),{value:v.value,selection:o.value,"onUpdate:selection":e[0]||(e[0]=l=>o.value=l)},{header:r(()=>{var l;return[n("div",M,[n("h5",T,B((l=i.value)==null?void 0:l.title)+" - Liste des Candidats",1)])]}),default:r(()=>[t(a(m),{selectionMode:"multiple",headerStyle:"width: 3rem"}),t(a(m),{field:"firstname",header:"Prénom"}),t(a(m),{field:"lastname",header:"Nom"}),t(a(m),{field:"description",header:"Description"})]),_:1},8,["value","selection"])])):(u(),h("div",q,[O,n("div",U,[t(a(b),{class:"p-button font-bold px-5 py-3 p-button-success p-button-rounded p-button-raised",onClick:C},{default:r(()=>[D("Ajouter")]),_:1})])]))])}}};export{J as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ElectionCandidateAdditionForm-N0fcelFI.js","assets/message.esm-DA8zJJ8T.js","assets/index-9WfbBEsR.js","assets/index-tbN9M-MT.css","assets/index.esm-7P6y4mBq.js","assets/textarea.esm-Zu41E-81.js","assets/editor.esm-UoywPXbm.js","assets/AppTableSkeleton-FqvfmN-I.js","assets/persons-olfuQxH3.js","assets/ElectionsView-aFFbvk0a.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
