import{a as A,r as v,u as S,c as _,b as t,e,f as s,w as i,o as f,g as O,A as V,h as b,_ as x}from"./index-hz0RWW_t.js";import{s as j,a,b as E}from"./toolbar.esm--yWOjs_u.js";import{s as d}from"./index.esm-fL_-_ufj.js";import{u as U}from"./persons-XZQ-Wm6p.js";import{u as $}from"./opinions-agh5c72w.js";const D={class:"grid"},F={class:"col-12"},N={key:0,class:"card"},B={class:"my-2"},I=t("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},[t("h5",{class:"m-0"},"Personnes")],-1),T={key:1,class:"px-4 py-5 shadow-1 flex flex-column md:flex-row md:align-items-center justify-content-between mb-3",style:{width:"600px","background-color":"white"}},L=t("div",null,[t("div",{class:"font-medium text-xl mt-2 mb-3"},"Aucune persone"),t("div",{class:"font-medium"},"Cliquer sur le bouton suivant pour rajouter une première personne à la base de données")],-1),M={class:"mt-4 mr-auto md:mt-0 md:mr-0"},K={__name:"PersonsView",setup(R){const l=U(),P=$();A(l.refreshPersons);const n=v(null),p=v(!1),g=()=>{var r;let o=(r=n.value)==null?void 0:r.map(c=>c.id);p.value=!0,V.persons.deletePersons(o).then(()=>{l.refreshPersons(),n.value=null}).finally(()=>p.value=!1)},h=S(),y=b(()=>x(()=>import("./PersonsUpsertForm-AgHJt4xu.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),m=(o={})=>{h.open(y,{data:o,onClose:l.refreshPersons,props:{modal:!0}})},k=b(()=>x(()=>import("./OpinionsUpsertForm-niuixhiL.js"),__vite__mapDeps([8,1,2,3,4,5,6,9,10,11]))),w=(o={})=>{h.open(k,{data:{author_id:o==null?void 0:o.id},onClose:P.refreshOpinions,props:{modal:!0}})};return(o,r)=>{var c;return f(),_("div",D,[t("div",F,[((c=e(l).persons)==null?void 0:c.length)>0?(f(),_("div",N,[s(e(j),{class:"mb-4"},{start:i(()=>[t("div",B,[s(e(d),{label:"Ajouter une personne",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:m}),s(e(d),{label:"Supprimer la sélection",icon:"pi pi-trash",class:"p-button-danger",onClick:g,disabled:!n.value||!n.value.length,loading:p.value},null,8,["disabled","loading"])])]),_:1}),s(e(E),{value:e(l).persons,selection:n.value,"onUpdate:selection":r[0]||(r[0]=u=>n.value=u)},{header:i(()=>[I]),default:i(()=>[s(e(a),{selectionMode:"multiple",headerStyle:"width: 3rem"}),s(e(a),{headerStyle:"min-width: 100px"},{body:i(({data:u})=>[s(e(d),{class:"p-button-text p-button-rounded",icon:"pi pi-pencil",onClick:C=>m(u)},null,8,["onClick"]),s(e(d),{class:"p-button-text p-button-rounded",icon:"pi pi-megaphone",onClick:C=>w(u)},null,8,["onClick"])]),_:1}),s(e(a),{field:"firstname",header:"Prénom"}),s(e(a),{field:"lastname",header:"Nom"}),s(e(a),{field:"description",header:"Description"})]),_:1},8,["value","selection"])])):(f(),_("div",T,[L,t("div",M,[s(e(d),{class:"p-button font-bold px-5 py-3 p-button-success p-button-rounded p-button-raised",onClick:m},{default:i(()=>[O("Ajouter")]),_:1})])]))])])}}};export{K as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/PersonsUpsertForm-AgHJt4xu.js","assets/message.esm-TrzrTVKT.js","assets/index-hz0RWW_t.js","assets/index-tbN9M-MT.css","assets/index.esm-fL_-_ufj.js","assets/textarea.esm-mUQgP30i.js","assets/editor.esm-C-9kZb3f.js","assets/format-39s6QTMr.js","assets/OpinionsUpsertForm-niuixhiL.js","assets/toolbar.esm--yWOjs_u.js","assets/persons-XZQ-Wm6p.js","assets/issues-t-Z-LgdM.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
