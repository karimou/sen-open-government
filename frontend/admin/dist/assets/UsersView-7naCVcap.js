import{d as k,r as p,A as x,o as w,u as C,a as c,c as b,b as t,e as A,f as e,g as s,w as r,h as S,i as j,_ as N}from"./index-LvZPrwL6.js";import{s as V,a as n,b as $,_ as B}from"./AppTableSkeleton-TXlDZp8X.js";import{s as m}from"./index.esm-mupo9eT0.js";const E=k("users",()=>{const f=p(null);return{users:f,refreshUsers:async()=>x.users.listUsers().then(l=>f.value=l)}}),P={class:"grid"},D={class:"col-12"},F={key:1,class:"card"},I={class:"my-2"},L=t("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},[t("h5",{class:"m-0"},"Utilisateurs")],-1),M={key:2,class:"px-4 py-5 shadow-1 flex flex-column md:flex-row md:align-items-center justify-content-between mb-3",style:{width:"600px","background-color":"white"}},T=t("div",null,[t("div",{class:"font-medium text-xl mt-2 mb-3"},"Aucun utilisateur"),t("div",{class:"font-medium"},"Cliquer sur le bouton suivant pour rajouter un premier utilisateur à la base de données")],-1),q={class:"mt-4 mr-auto md:mt-0 md:mr-0"},H={__name:"UsersView",setup(f){const i=p(!1),l=E();w(()=>{i.value=!0,l.refreshUsers().then(()=>i.value=!1)});const o=p(null),_=p(!1),U=()=>{var a;let u=(a=o.value)==null?void 0:a.map(d=>d.id);_.value=!0,x.users.deleteUsers(u).then(()=>{l.refreshUsers(),o.value=null}).finally(()=>_.value=!1)},y=C(),g=j(()=>N(()=>import("./UsersUpsertForm-8YwBUu_O.js"),__vite__mapDeps([0,1,2,3,4,5]))),h=(u={})=>{y.open(g,{data:u,onClose:l.refreshUsers,props:{modal:!0}})};return(u,a)=>{var d;return c(),b("div",P,[t("div",D,[i.value?(c(),A(B,{key:0})):((d=e(l).users)==null?void 0:d.length)>0?(c(),b("div",F,[s(e(V),{class:"mb-4"},{start:r(()=>[t("div",I,[s(e(m),{label:"Ajouter un utilisateur",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:h}),s(e(m),{label:"Supprimer la sélection",icon:"pi pi-trash",class:"p-button-danger",onClick:U,disabled:!o.value||!o.value.length,loading:_.value},null,8,["disabled","loading"])])]),_:1}),s(e($),{value:e(l).users,selection:o.value,"onUpdate:selection":a[0]||(a[0]=v=>o.value=v)},{header:r(()=>[L]),default:r(()=>[s(e(n),{selectionMode:"multiple",headerStyle:"width: 3rem"}),s(e(n),{headerStyle:"width: 60px"},{body:r(({data:v})=>[s(e(m),{class:"p-button-text p-button-rounded",icon:"pi pi-pencil",onClick:O=>h(v)},null,8,["onClick"])]),_:1}),s(e(n),{field:"username",header:"Nom d'utilisateur"}),s(e(n),{field:"email",header:"email"}),s(e(n),{field:"phone",header:"Numéro de téléphone"})]),_:1},8,["value","selection"])])):(c(),b("div",M,[T,t("div",q,[s(e(m),{class:"p-button font-bold px-5 py-3 p-button-success p-button-rounded p-button-raised",onClick:h},{default:r(()=>[S("Ajouter")]),_:1})])]))])])}}};export{H as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/UsersUpsertForm-8YwBUu_O.js","assets/message.esm-q41ZT9ln.js","assets/index-LvZPrwL6.js","assets/index-D9x--RlZ.css","assets/index.esm-mupo9eT0.js","assets/inputmask.esm-TDE58Yb3.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
