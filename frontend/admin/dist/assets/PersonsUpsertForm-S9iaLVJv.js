import{c as D,a as i,b as E,u as j,s as q}from"./message.esm-UA5ETg2a.js";import{b as d,s as I}from"./index.esm-AA2EX6A9.js";import{s as T}from"./textarea.esm-Hm93eXmG.js";import"./editor.esm-p-MO2Hmf.js";import{r as k,X as z,o as C,A as $,a as U,c as P,b as o,E as S,g as a,f as l,V as n,F as L,n as W,e as X,w as G,h as H}from"./index-LTkJtgF3.js";import{_ as J}from"./AppPicturesSelector-rCdsnUdI.js";import{f as K}from"./format-39s6QTMr.js";import"./AppTableSkeleton-kSd5XViM.js";import"./index.esm-9D7YHrr2.js";const O={style:{width:"450px"}},Q=["initial-values"],Y={class:"formgrid grid"},Z={class:"field col-6"},ee=o("label",{for:"firstname"},"PrÃ©nom",-1),te={class:"field col-6"},le=o("label",{for:"title"},"Nom",-1),oe={class:"formgrid grid"},se={class:"field col-6"},ae=o("label",{for:"date_of_birth"},"Date de naissance",-1),ie={class:"field col-6"},ne=o("label",{for:"occupation"},"Profession",-1),de={class:"field"},re=o("label",{for:"description"},"Description",-1),ue={class:"formgrid grid"},ce={class:"field col-6"},me=o("label",{for:"title"},"Website",-1),fe={class:"field col-6"},_e=o("label",{for:"title"},"Facebook",-1),pe={class:"field col-6"},ve=o("label",{for:"title"},"Twitter",-1),be={class:"field col-6"},Ve=o("label",{for:"title"},"Instagram",-1),Ie={__name:"PersonsUpsertForm",setup(ge){const B=D({firstname:i().required(),lastname:i().required(),gender:i(),date_of_birth:E(),occupation:i(),description:i(),website:i(),facebook:i(),twitter:i(),instagram:i(),photo:i()}),{handleSubmit:M,errors:N,defineField:s,setFieldValue:x}=j({validationSchema:B}),[_,he]=s("firstname"),[p,we]=s("lastname");s("gender");const[v,ye]=s("date_of_birth"),[b,Ae]=s("description"),[V,ke]=s("occupation"),[g,Ue]=s("twitter"),[h,xe]=s("facebook"),[w,Fe]=s("instagram"),[y,$e]=s("website"),[A,Pe]=s("photo"),m=k(null),R=k({}),r=z("dialogRef");C(()=>{var u,e,t;(u=r.value.data)!=null&&u.date_of_birth&&x("date_of_birth",K((e=r.value.date_of_birth)==null?void 0:e.date,"yyyy-MM-dd")),["firstname","lastname","gender","occupation","description","facebook","instagram","twitter","website","photo"].forEach(c=>{r.value.data[c]&&x(c,r.value.data[c])}),m.value=(t=r.value.data)==null?void 0:t.id});const f=k(!1),F=M(u=>{f.value=!0,m.value?$.persons.updatePerson({...u,id:m.value}).then(e=>{r.value.close("success")}).finally(()=>f.value=!1):$.persons.addPerson(u).then(e=>{r.value.close("success")}).finally(()=>f.value=!1)});return(u,e)=>(U(),P("div",O,[o("h5",null,S(m.value?"Modifier":"Ajouter")+" une personne",1),o("form",{onSubmit:e[10]||(e[10]=(...t)=>l(F)&&l(F)(...t)),"initial-values":R.value.value},[a(J,{image:l(A),"onUpdate:image":e[0]||(e[0]=t=>n(A)?A.value=t:null)},null,8,["image"]),o("div",Y,[o("div",Z,[ee,a(l(d),{id:"firstname",type:"text",modelValue:l(_),"onUpdate:modelValue":e[1]||(e[1]=t=>n(_)?_.value=t:null),class:"w-full"},null,8,["modelValue"])]),o("div",te,[le,a(l(d),{id:"lastname",type:"text",modelValue:l(p),"onUpdate:modelValue":e[2]||(e[2]=t=>n(p)?p.value=t:null),class:"w-full"},null,8,["modelValue"])])]),o("div",oe,[o("div",se,[ae,a(l(d),{id:"date_of_birth",type:"date",modelValue:l(v),"onUpdate:modelValue":e[3]||(e[3]=t=>n(v)?v.value=t:null),class:"w-full"},null,8,["modelValue"])]),o("div",ie,[ne,a(l(d),{id:"occupation",modelValue:l(V),"onUpdate:modelValue":e[4]||(e[4]=t=>n(V)?V.value=t:null),class:"w-full"},null,8,["modelValue"])])]),o("div",de,[re,a(l(T),{id:"description",modelValue:l(b),"onUpdate:modelValue":e[5]||(e[5]=t=>n(b)?b.value=t:null),class:"w-full",autoResize:!0},null,8,["modelValue"])]),o("div",ue,[o("div",ce,[me,a(l(d),{id:"website",type:"url",modelValue:l(y),"onUpdate:modelValue":e[6]||(e[6]=t=>n(y)?y.value=t:null),class:"w-full"},null,8,["modelValue"])]),o("div",fe,[_e,a(l(d),{id:"facebook",type:"text",modelValue:l(h),"onUpdate:modelValue":e[7]||(e[7]=t=>n(h)?h.value=t:null),class:"w-full"},null,8,["modelValue"])]),o("div",pe,[ve,a(l(d),{id:"twitter",type:"text",modelValue:l(g),"onUpdate:modelValue":e[8]||(e[8]=t=>n(g)?g.value=t:null),class:"w-full"},null,8,["modelValue"])]),o("div",be,[Ve,a(l(d),{id:"instagram",type:"text",modelValue:l(w),"onUpdate:modelValue":e[9]||(e[9]=t=>n(w)?w.value=t:null),class:"w-full"},null,8,["modelValue"])])]),a(l(I),{type:"submit",label:"Soumettre",class:"w-full",loading:f.value},null,8,["loading"])],40,Q),(U(!0),P(L,null,W(l(N),(t,c)=>(U(),X(l(q),{severity:"error",key:c},{default:G(()=>[H(S(t),1)]),_:2},1024))),128))]))}};export{Ie as default};
