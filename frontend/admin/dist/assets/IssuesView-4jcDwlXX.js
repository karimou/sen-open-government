import{r as h,a as S,u as O,c as v,b as o,e as V,f as e,g as s,w as a,o as d,h as $,A as j,i as x,_ as g}from"./index-T5lfGDRy.js";import{s as E,a as p,b as T,_ as U}from"./AppTableSkeleton-tDWp2KOa.js";import{s as r}from"./index.esm-vgHkgeCn.js";import{u as B}from"./issues-o02nH_GU.js";import{u as D}from"./opinions-R5as_GSD.js";const F={class:"grid"},P={class:"col-12"},L={key:1,class:"card"},N={class:"my-2"},q=o("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},[o("h5",{class:"m-0"},"Thèmes")],-1),M={key:2,class:"px-4 py-5 shadow-1 flex flex-column md:flex-row md:align-items-center justify-content-between mb-3",style:{width:"600px","background-color":"white"}},R=o("div",null,[o("div",{class:"font-medium text-xl mt-2 mb-3"},"Aucun thème"),o("div",{class:"font-medium"},"Cliquer sur le bouton suivant pour rajouter un premier thème à la base de données")],-1),z={class:"mt-4 mr-auto md:mt-0 md:mr-0"},X={__name:"IssuesView",setup(G){const l=B(),k=D(),m=h(!1);S(()=>{m.value=!0,l.refreshIssues().then(()=>m.value=!1)});const n=h(null),_=h(!1),y=()=>{var i;let t=(i=n.value)==null?void 0:i.map(u=>u.id);_.value=!0,j.issues.deleteIssues(t).then(()=>{l.refreshIssues(),n.value=null}).finally(()=>_.value=!1)},b=O(),I=x(()=>g(()=>import("./IssuesUpsertForm-cOHiKp2W.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),f=(t={})=>{b.open(I,{data:t,onClose:l.refreshIssues,props:{modal:!0}})},w=x(()=>g(()=>import("./OpinionsUpsertForm-1TYw0KkK.js"),__vite__mapDeps([7,2,3,1,4,5,6,8,9,10]))),C=(t={})=>{b.open(w,{data:{issue_id:t==null?void 0:t.id},onClose:k.refreshOpinions,props:{modal:!0}})};return(t,i)=>{var u;return d(),v("div",F,[o("div",P,[m.value?(d(),V(U,{key:0})):((u=e(l).issues)==null?void 0:u.length)>0?(d(),v("div",L,[s(e(E),{class:"mb-4"},{start:a(()=>[o("div",N,[s(e(r),{label:"Ajouter un thème politique",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:f}),s(e(r),{label:"Supprimer la sélection",icon:"pi pi-trash",class:"p-button-danger",onClick:y,disabled:!n.value||!n.value.length,loading:_.value},null,8,["disabled","loading"])])]),_:1}),s(e(T),{value:e(l).issues,selection:n.value,"onUpdate:selection":i[0]||(i[0]=c=>n.value=c)},{header:a(()=>[q]),default:a(()=>[s(e(p),{selectionMode:"multiple",headerStyle:"width: 3rem"}),s(e(p),{headerStyle:"min-width: 100px"},{body:a(({data:c})=>[s(e(r),{class:"p-button-text p-button-rounded",icon:"pi pi-pencil",onClick:A=>f(c)},null,8,["onClick"]),s(e(r),{class:"p-button-text p-button-rounded",icon:"pi pi-megaphone",onClick:A=>C(c)},null,8,["onClick"])]),_:1}),s(e(p),{field:"title",header:"Titre"}),s(e(p),{field:"short_description",header:"Description"})]),_:1},8,["value","selection"])])):(d(),v("div",M,[R,o("div",z,[s(e(r),{class:"p-button font-bold px-5 py-3 p-button-success p-button-rounded p-button-raised",onClick:f},{default:a(()=>[$("Ajouter")]),_:1})])]))])])}}};export{X as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/IssuesUpsertForm-cOHiKp2W.js","assets/message.esm-CLFrG8pF.js","assets/index-T5lfGDRy.js","assets/index-tbN9M-MT.css","assets/index.esm-vgHkgeCn.js","assets/textarea.esm-h-8ZmNWD.js","assets/editor.esm-6r_DiYhw.js","assets/OpinionsUpsertForm-1TYw0KkK.js","assets/AppTableSkeleton-tDWp2KOa.js","assets/persons-uZLKvvDa.js","assets/issues-o02nH_GU.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
